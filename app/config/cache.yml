# HTTP caching (with Varnish)
fos_http_cache:
  debug: 
    enabled: false
  tags:
    enabled: false
  user_context:
    enabled: false
  # This configure our HTTP caching headers
  cache_control:
    defaults:
      overwrite: true
    rules:
      # No cache in bo
      # -
      #   match:
      #     path: ^/admin$
      #   headers:
      #     cache_control:
      #       public: false
      #       s_maxage: 0
      
      # Cache Internal GraphQL API
      -
        match:
          _route: ^graphql_multiple_endpoint$
          methods: [POST]
        headers:
          cache_control:
            public: true
            s_maxage: 60
      # match everything to set defaults
      -
        match:
          path: ^/
          methods: [GET]
        headers:
          cache_control:
            public: true
            s_maxage: 60
          vary: [Accept-Encoding, Accept-Language]
  # The proxy client sends invalidation requests to your caching proxy.
  proxy_client:
    default: varnish
    varnish:
      http:
        servers:
          - 127.0.0.1
          - 172.17.0.1 # Used in prod ? See with @ptondereau
        base_url: 127.0.0.1


# Disable @Cache annotation, please use fos_http_cache
sensio_framework_extra:
    cache:       { annotations: false }
