fos_elastica:
  clients:
    default: { host: localhost, port: 9200 }
  serializer: ~
  indexes:
    app:
      index_name: app_prod
      settings:
        number_of_shards: 1
        number_of_replicas: 0
      finder: ~
      types:
      # User
        user:
          indexable_callback: isEnabled
          serializer:
            groups: [UsersInfos, Proposals]
          _all: { enabled: false }
          mappings:
            id:
              type: long
            slug:
              index: not_analyzed
            username:
              analyzer: %language_analyzer%
              index_options: offsets
              fields:
                std: { type: string, analyzer: standard }
            biography:
              analyzer: %language_analyzer%
              index_options: offsets
              fields:
                std: { type: string, analyzer: standard }
            createdAt:
              type: date
            updatedAt:
              type: date
          persistence:
            driver: orm
            model: Capco\UserBundle\Entity\User
            provider: ~
            listener: ~
            finder: ~
        # Argument
        argument:
          indexable_callback: getIsEnabled
          serializer:
            groups: [Opinions, OpinionVersions]
          _all: { enabled: false }
          mappings:
            body:
              analyzer: %language_analyzer%
              index_options: offsets
              fields:
                std: { type: string, analyzer: standard }
            createdAt:
              type: date
            updatedAt:
              type: date
            Author:
              type: object
              properties:
                slug:
                  index: not_analyzed
          persistence:
            driver: orm
            model: Capco\AppBundle\Entity\Argument
            provider: ~
            listener: ~
            finder: ~
        # Project
        project:
          indexable_callback: getIsEnabled
          serializer:
            groups: [Opinions, OpinionVersions]
          _all: { enabled: false }
          mappings:
            title:
              analyzer: %language_analyzer%
              index_options: offsets
              fields:
                std: { type: string, analyzer: standard }
            slug:
              index: not_analyzed
            Author:
              type: object
              properties:
                slug:
                  index: not_analyzed
          persistence:
            driver: orm
            model: Capco\AppBundle\Entity\Project
            provider: ~
            listener: ~
            finder: ~
        # Comment
        comment:
          indexable_callback: getIsEnabled
          serializer:
            groups: [Comments, Proposals]
          _all: { enabled: false }
          mappings:
            id:
              type: long
            strippedBody:
              analyzer: %language_analyzer%
              index_options: offsets
              fields:
                std: { type: string, analyzer: standard }
            createdAt:
              type: date
            updatedAt:
              type: date
            Author:
              type: object
              properties:
                slug:
                  index: not_analyzed
            authorName: ~
          persistence:
            driver: orm
            model: Capco\AppBundle\Entity\Comment
            provider: ~
            listener: ~
            finder: ~
        # consultation_step
        consultation_step:
          indexable_callback: getIsEnabled
          serializer:
            groups: [ConsultationSteps]
          mappings:
            title:
              analyzer: %language_analyzer%
              index_options: offsets
          persistence:
            driver: orm
            model: Capco\AppBundle\Entity\Steps\ConsultationStep
            provider: ~
            listener: ~
            finder: ~
        # Event
        event:
          indexable_callback: getIsEnabled
          serializer:
            groups: [Events]
          _all: { enabled: false }
          mappings:
            title:
              analyzer: %language_analyzer%
              index_options: offsets
              fields:
                std: { type: string, analyzer: standard }
            slug:
              index: not_analyzed
            strippedBody:
              analyzer: %language_analyzer%
              index_options: offsets
              fields:
                std: { type: string, analyzer: standard }
            createdAt:
              type: date
            updatedAt:
              type: date
            startAt:
              type: date
            endAt:
              type: date
            Author:
              type: object
              properties:
                slug:
                  index: not_analyzed
          persistence:
            driver: orm
            model: Capco\AppBundle\Entity\Event
            provider: ~
            listener: ~
            finder: ~
        # Idea
        idea:
          indexable_callback: getIsEnabled
          serializer:
            groups: [Ideas]
          _all: { enabled: false }
          mappings:
            title:
              analyzer: %language_analyzer%
              index_options: offsets
              fields:
                std: { type: string, analyzer: standard }
            slug:
              index: not_analyzed
            strippedBody:
              analyzer: %language_analyzer%
              index_options: offsets
              fields:
                std: { type: string, analyzer: standard }
            strippedObject:
              analyzer: %language_analyzer%
              index_options: offsets
              fields:
                std: { type: string, analyzer: standard }
            createdAt:
              type: date
            updatedAt:
              type: date
            Author:
              type: object
              properties:
                slug:
                  index: not_analyzed
          persistence:
            driver: orm
            model: Capco\AppBundle\Entity\Idea
            provider: ~
            listener: ~
            finder: ~
        # Proposal
        proposal:
          indexable_callback: isEnabled
          serializer:
            groups: [Proposals]
        # Opinion
        opinion:
          indexable_callback: getIsEnabled
          _all: { enabled: false }
          mappings:
            id:
              type: long
            title:
              analyzer: %language_analyzer%
              index_options: offsets
              fields:
                std: { type: string, analyzer: standard }
            slug:
              index: not_analyzed
            strippedBody:
              analyzer: %language_analyzer%
              index_options: offsets
            slug:
              index: not_analyzed
            author:
              type: object
              properties:
                slug:
                  index: not_analyzed
            createdAt:
              type: date
              fields:
                std: { type: string, analyzer: standard }
            updatedAt:
              type: date
            district:
              type: object
              properties:
                name:
                  index: not_analyzed
            status:
              type: object
              properties:
                name:
                  index: not_analyzed
            theme:
              type: object
              properties:
                title:
                  index: not_analyzed
          persistence:
            driver: orm
            model: Capco\AppBundle\Entity\Proposal
            provider: ~
            listener: ~
            finder: ~
        # Question
        question:
          serializer:
            groups: [Proposals, Questions]
          mappings:
            title:
              analyzer: %language_analyzer%
              index_options: offsets
          persistence:
            driver: orm
            model: Capco\AppBundle\Entity\Question
            provider: ~
            listener: ~
            finder: ~
        # ProposalResponse
        proposalresponse:
          serializer:
            groups: [Proposals]
          mappings:
            value:
              analyzer: %language_analyzer%
              index_options: offsets
          persistence:
            driver: orm
            model: Capco\AppBundle\Entity\ProposalResponse
            provider: ~
            listener: ~
            finder: ~
        # District
        district:
          serializer:
            groups: [Districts, Proposals]
          mappings:
            id:
              type: long
            name:
              analyzer: %language_analyzer%
              index_options: offsets
            createdAt:
              type: date
            updatedAt:
              type: date
          persistence:
            driver: orm
            model: Capco\AppBundle\Entity\District
            provider: ~
            listener: ~
            finder: ~
        # Status
        status:
          serializer:
            groups: [Statuses, Proposals]
          mappings:
            id:
              type: long
            name:
              analyzer: %language_analyzer%
              index_options: offsets
            createdAt:
              type: date
            updatedAt:
              type: date
          persistence:
            driver: orm
            model: Capco\AppBundle\Entity\Status
            provider: ~
            listener: ~
            finder: ~
        # Opinion
        opinion:
          indexable_callback: getIsEnabled
          serializer:
            groups: [Opinions]
          mappings:
            title:
              analyzer: %language_analyzer%
              index_options: offsets
            slug:
              index: not_analyzed
            strippedBody:
              analyzer: %language_analyzer%
              index_options: offsets
            Author:
              type: object
              properties:
                slug:
                  index: not_analyzed
          persistence:
            driver: orm
            model: Capco\AppBundle\Entity\Opinion
            provider: ~
            listener: ~
            finder: ~
        # OpinionVersion
        opinionVersion:
          indexable_callback: isEnabled
          serializer:
            groups: [OpinionVersions]
          _all: { enabled: false }
          mappings:
            title:
              analyzer: %language_analyzer%
              index_options: offsets
              fields:
                std: { type: string, analyzer: standard }
            slug:
              index: not_analyzed
            strippedBody:
              analyzer: %language_analyzer%
              index_options: offsets
              fields:
                std: { type: string, analyzer: standard }
            updatedAt:
              type: date
            createdAt:
              type: date
            author:
              type: object
              properties:
                slug:
                  index: not_analyzed
          persistence:
            driver: orm
            model: Capco\AppBundle\Entity\OpinionVersion
            provider: ~
            listener: ~
            finder: ~
        # Post
        post:
          indexable_callback: getIsPublished
          serializer:
            groups: [Posts]
          _all: { enabled: false }
          mappings:
            title:
              analyzer: %language_analyzer%
              index_options: offsets
              fields:
                std: { type: string, analyzer: standard }
            abstract:
              analyzer: %language_analyzer%
              index_options: offsets
              fields:
                std: { type: string, analyzer: standard }
            slug:
              index: not_analyzed
            strippedBody:
              analyzer: %language_analyzer%
              index_options: offsets
            Author:
              type: object
              fields:
                std: { type: string, analyzer: standard }
            createdAt:
              type: date
            updatedAt:
              type: date
            publishedAt:
              type: date
            Authors:
              type: nested
              properties:
                slug:
                  index: not_analyzed
          persistence:
            driver: orm
            model: Capco\AppBundle\Entity\Post
            provider: ~
            listener: ~
            finder: ~
        # Source
        source:
          indexable_callback: getIsEnabled
          serializer:
            groups: [Opinions]
          _all: { enabled: false }
          mappings:
            title:
              analyzer: %language_analyzer%
              index_options: offsets
              fields:
                std: { type: string, analyzer: standard }
            slug:
              index: not_analyzed
            body:
              analyzer: %language_analyzer%
              index_options: offsets
              fields:
                std: { type: string, analyzer: standard }
            createdAt:
              type: date
            updatedAt:
              type: date
            Author:
              type: object
              properties:
                slug:
                  index: not_analyzed
          persistence:
            driver: orm
            model: Capco\AppBundle\Entity\Source
            provider: ~
            listener: ~
            finder: ~
        # Theme
        theme:
          indexable_callback: getIsEnabled
          serializer:
            groups: [Themes, Proposals]
          _all: { enabled: false }
          mappings:
            id:
              type: long
            title:
              analyzer: %language_analyzer%
              index_options: offsets
              fields:
                std: { type: string, analyzer: standard }
            slug:
              index: not_analyzed
            teaser:
              analyzer: %language_analyzer%
              index_options: offsets
              fields:
                std: { type: string, analyzer: standard }
            strippedBody:
              analyzer: %language_analyzer%
              index_options: offsets
              fields:
                std: { type: string, analyzer: standard }
            Author:
              type: object
              properties:
                slug:
                  index: not_analyzed
            createdAt:
              type: date
            updatedAt:
              type: date
          persistence:
            driver: orm
            model: Capco\AppBundle\Entity\Theme
            provider: ~
            listener: ~
            finder: ~
        # ProjectAbstractStep
        projectabstractstep:
          serializer:
            groups: [ProjectAbstractSteps]
          persistence:
            driver: orm
            model: Capco\AppBundle\Entity\Steps\ProjectAbstractStep
            provider: ~
            listener: ~
            finder: ~
