fos_elastica:
  clients:
    default: { host: localhost, port: 9200 }
  serializer: ~
  indexes:
    app:
      index_name: app_prod
      finder: ~
      types:
      # User
        user:
          indexable_callback: isEnabled
          serializer:
            groups: [UsersInfos, Proposals]
          persistence:
            driver: orm
            model: Capco\UserBundle\Entity\User
            provider: ~
            listener: ~
            finder: ~
        # Argument
        argument:
          indexable_callback: getIsEnabled
          mappings:
            id:
              type: long
            body:
              analyzer: %language_analyzer%
              index_options: offsets
            createdAt:
              type: date
            updatedAt:
              type: date
            Author:
              type: object
              properties:
                slug:
                  index: not_analyzed
          persistence:
            driver: orm
            model: Capco\AppBundle\Entity\Argument
            provider: ~
            listener: ~
            finder: ~
        # Project
        project:
          indexable_callback: getIsEnabled
          mappings:
            id:
              type: long
            title:
              analyzer: %language_analyzer%
              index_options: offsets
            slug:
              index: not_analyzed
            publishedAt:
              type: date
            createdAt:
              type: date
            updatedAt:
              type: date
            Author:
              type: object
              properties:
                slug:
                  index: not_analyzed
          persistence:
            driver: orm
            model: Capco\AppBundle\Entity\Project
            provider: ~
            listener: ~
            finder: ~
        # Comment
        comment:
          indexable_callback: getIsEnabled
          serializer:
            groups: [Comments, Proposals]
          persistence:
            driver: orm
            model: Capco\AppBundle\Entity\Comment
            provider: ~
            listener: ~
            finder: ~
        # Event
        event:
          indexable_callback: getIsEnabled
          mappings:
            id:
              type: long
            title:
              analyzer: %language_analyzer%
              index_options: offsets
            slug:
              index: not_analyzed
            strippedBody:
              analyzer: %language_analyzer%
              index_options: offsets
            createdAt:
              type: date
            updatedAt:
              type: date
            startAt:
              type: date
            endAt:
              type: date
            Author:
              type: object
              properties:
                slug:
                  index: not_analyzed
          persistence:
            driver: orm
            model: Capco\AppBundle\Entity\Event
            provider: ~
            listener: ~
            finder: ~
        # Idea
        idea:
          indexable_callback: getIsEnabled
          mappings:
            id:
              type: long
            title:
              analyzer: %language_analyzer%
              index_options: offsets
            slug:
              index: not_analyzed
            strippedBody:
              analyzer: %language_analyzer%
              index_options: offsets
            strippedObject:
              analyzer: %language_analyzer%
              index_options: offsets
            createdAt:
              type: date
            updatedAt:
              type: date
            Author:
              type: object
              properties:
                slug:
                  index: not_analyzed
          persistence:
            driver: orm
            model: Capco\AppBundle\Entity\Idea
            provider: ~
            listener: ~
            finder: ~
        # Proposal
        proposal:
          indexable_callback: isEnabled
          serializer:
            groups: [Proposals]
          persistence:
            driver: orm
            model: Capco\AppBundle\Entity\Proposal
            provider: ~
            listener: ~
            finder: ~
        # District
        district:
          serializer:
            groups: [Districts, Proposals]
          persistence:
            driver: orm
            model: Capco\AppBundle\Entity\District
            provider: ~
            listener: ~
            finder: ~
        # Status
        status:
          serializer:
            groups: [Status, Proposals]
          persistence:
            driver: orm
            model: Capco\AppBundle\Entity\Status
            provider: ~
            listener: ~
            finder: ~
        # Opinion
        opinion:
          indexable_callback: getIsEnabled
          mappings:
            id:
              type: long
            title:
              analyzer: %language_analyzer%
              index_options: offsets
            slug:
              index: not_analyzed
            strippedBody:
              analyzer: %language_analyzer%
              index_options: offsets
            updatedAt:
              type: date
            createdAt:
              type: date
            Author:
              type: object
              properties:
                slug:
                  index: not_analyzed
          persistence:
            driver: orm
            model: Capco\AppBundle\Entity\Opinion
            provider: ~
            listener: ~
            finder: ~
        # OpinionVersion
        opinionVersion:
          indexable_callback: isEnabled
          mappings:
            id:
              type: long
            title:
              analyzer: %language_analyzer%
              index_options: offsets
            slug:
              index: not_analyzed
            strippedBody:
              analyzer: %language_analyzer%
              index_options: offsets
            updatedAt:
              type: date
            createdAt:
              type: date
            author:
              type: object
              properties:
                slug:
                  index: not_analyzed
          persistence:
            driver: orm
            model: Capco\AppBundle\Entity\OpinionVersion
            provider: ~
            listener: ~
            finder: ~
        # Post
        post:
          indexable_callback: getIsPublished
          mappings:
            id:
              type: long
            title:
              analyzer: %language_analyzer%
              index_options: offsets
            abstract:
              analyzer: %language_analyzer%
              index_options: offsets
            slug:
              index: not_analyzed
            strippedBody:
              analyzer: %language_analyzer%
              index_options: offsets
            createdAt:
              type: date
            updatedAt:
              type: date
            publishedAt:
              type: date
            Authors:
              type: nested
              properties:
                slug:
                  index: not_analyzed
          persistence:
            driver: orm
            model: Capco\AppBundle\Entity\Post
            provider: ~
            listener: ~
            finder: ~
        # Source
        source:
          indexable_callback: getIsEnabled
          mappings:
            id:
              type: long
            title:
              analyzer: %language_analyzer%
              index_options: offsets
            slug:
              index: not_analyzed
            body:
              analyzer: %language_analyzer%
              index_options: offsets
            createdAt:
              type: date
            updatedAt:
              type: date
            Author:
              type: object
              properties:
                slug:
                  index: not_analyzed
          persistence:
            driver: orm
            model: Capco\AppBundle\Entity\Source
            provider: ~
            listener: ~
            finder: ~
        # Theme
        theme:
          indexable_callback: getIsEnabled
          serializer:
            groups: [Themes, Proposals]
          persistence:
            driver: orm
            model: Capco\AppBundle\Entity\Theme
            provider: ~
            listener: ~
            finder: ~
