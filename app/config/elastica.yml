fos_elastica:
  clients:
    default: { host: localhost, port: 9200 }
  indexes:
    app:
      index_name: app_%kernel.environment%
      settings:
        index:
          number_of_shards: 3
          number_of_replicas: 0
      finder: ~
      types:
      # User
        user:
          indexable_callback: isEnabled
          mappings:
            id:
              type: long
            slug:
              index: not_analyzed
            username:
              analyzer: %language_analyzer%
              index_options: offsets
            biography:
              analyzer: %language_analyzer%
              index_options: offsets
          persistence:
            driver: orm
            model: Capco\UserBundle\Entity\User
            provider: ~
            listener: ~
            finder: ~
        # Argument
        argument:
          indexable_callback: getIsEnabled
          mappings:
            id:
              type: long
            body:
              analyzer: %language_analyzer%
              index_options: offsets
            createdAt:
              type: date
            updatedAt:
              type: date
            Author:
              type: object
              properties:
                slug:
                  index: not_analyzed
          persistence:
            driver: orm
            model: Capco\AppBundle\Entity\Argument
            provider: ~
            listener: ~
            finder: ~
        # Consultation
        consultation:
          indexable_callback: getIsEnabled
          mappings:
            id:
              type: long
            title:
              analyzer: %language_analyzer%
              index_options: offsets
            slug:
              index: not_analyzed
            publishedAt:
              type: date
            createdAt:
              type: date
            updatedAt:
              type: date
            Author:
              type: object
              properties:
                slug:
                  index: not_analyzed
          persistence:
            driver: orm
            model: Capco\AppBundle\Entity\Consultation
            provider: ~
            listener: ~
            finder: ~
        # Comment
        comment:
          indexable_callback: getIsEnabled
          mappings:
            id:
              type: long
            strippedBody:
              analyzer: %language_analyzer%
              index_options: offsets
            createdAt:
              type: date
            updatedAt:
              type: date
            Author:
              type: object
              properties:
                slug:
                  index: not_analyzed
            authorName: ~
          persistence:
            driver: orm
            model: Capco\AppBundle\Entity\AbstractComment
            provider: ~
            listener: ~
            finder: ~
        # Event
        event:
          indexable_callback: getIsEnabled
          mappings:
            id:
              type: long
            title:
              analyzer: %language_analyzer%
              index_options: offsets
            slug:
              index: not_analyzed
            strippedBody:
              analyzer: %language_analyzer%
              index_options: offsets
            createdAt:
              type: date
            updatedAt:
              type: date
            startAt:
              type: date
            endAt:
              type: date
            Author:
              type: object
              properties:
                slug:
                  index: not_analyzed
          persistence:
            driver: orm
            model: Capco\AppBundle\Entity\Event
            provider: ~
            listener: ~
            finder: ~
        # Idea
        idea:
          indexable_callback: getIsEnabled
          mappings:
            id:
              type: long
            title:
              analyzer: %language_analyzer%
              index_options: offsets
            slug:
              index: not_analyzed
            strippedBody:
              analyzer: %language_analyzer%
              index_options: offsets
            strippedObject:
              analyzer: %language_analyzer%
              index_options: offsets
            createdAt:
              type: date
            updatedAt:
              type: date
            Author:
              type: object
              properties:
                slug:
                  index: not_analyzed
          persistence:
            driver: orm
            model: Capco\AppBundle\Entity\Idea
            provider: ~
            listener: ~
            finder: ~
        # Opinion
        opinion:
          indexable_callback: getIsEnabled
          mappings:
            id:
              type: long
            title:
              analyzer: %language_analyzer%
              index_options: offsets
            slug:
              index: not_analyzed
            strippedBody:
              analyzer: %language_analyzer%
              index_options: offsets
            updatedAt:
              type: date
            createdAt:
              type: date
            Author:
              type: object
              properties:
                slug:
                  index: not_analyzed
          persistence:
            driver: orm
            model: Capco\AppBundle\Entity\Opinion
            provider: ~
            listener: ~
            finder: ~
        # Post
        post:
          indexable_callback: getIsPublished
          mappings:
            id:
              type: long
            title:
              analyzer: %language_analyzer%
              index_options: offsets
            abstract:
              analyzer: %language_analyzer%
              index_options: offsets
            slug:
              index: not_analyzed
            strippedBody:
              analyzer: %language_analyzer%
              index_options: offsets
            createdAt:
              type: date
            updatedAt:
              type: date
            publishedAt:
              type: date
            Authors:
              type: nested
              properties:
                slug:
                  index: not_analyzed
          persistence:
            driver: orm
            model: Capco\AppBundle\Entity\Post
            provider: ~
            listener: ~
            finder: ~
        # Source
        source:
          indexable_callback: getIsEnabled
          mappings:
            id:
              type: long
            title:
              analyzer: %language_analyzer%
              index_options: offsets
            slug:
              index: not_analyzed
            body:
              analyzer: %language_analyzer%
              index_options: offsets
            createdAt:
              type: date
            updatedAt:
              type: date
            Author:
              type: object
              properties:
                slug:
                  index: not_analyzed
          persistence:
            driver: orm
            model: Capco\AppBundle\Entity\Source
            provider: ~
            listener: ~
            finder: ~
        # Theme
        theme:
          indexable_callback: getIsEnabled
          mappings:
            id:
              type: long
            title:
              analyzer: %language_analyzer%
              index_options: offsets
            slug:
              index: not_analyzed
            teaser:
              analyzer: %language_analyzer%
              index_options: offsets
            strippedBody:
              analyzer: %language_analyzer%
              index_options: offsets
            Author:
              type: object
              properties:
                slug:
                  index: not_analyzed
            createdAt:
              type: date
            updatedAt:
              type: date
          persistence:
            driver: orm
            model: Capco\AppBundle\Entity\Theme
            provider: ~
            listener: ~
            finder: ~
