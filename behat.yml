
frontend:
    extensions:
        Behat\Symfony2Extension:
          kernel:
              env: test
              debug: false
        Tonic\Behat\ParallelScenarioExtension: ~
        Alex\MailCatcher\Behat\MailCatcherExtension\Extension:
            url: http://mailcatchersmtp
            purge_before_scenario: true
        SensioLabs\Behat\PageObjectExtension:
            namespaces:
                page: [ Capco\AppBundle\Behat\Page ]
        Behat\MinkExtension:
            base_url: 'http://capco.test'
            sessions:
               default:
                   symfony2: ~
    suites:
        front:
            paths: [ '%paths.base%/features/front' ]
            contexts:
                - Capco\AppBundle\Behat\ApplicationContext
                - Capco\AppBundle\Behat\NavigationContext
                - Alex\MailCatcher\Behat\MailCatcherContext
            filters:
                tags: "~@javascript"

javascript:
    extensions:
        Alex\MailCatcher\Behat\MailCatcherExtension\Extension:
            url: http://mailcatchersmtp
            purge_before_scenario: true
        Behat\Symfony2Extension:
            kernel:
                env: test
                debug: false
        SensioLabs\Behat\PageObjectExtension:
            namespaces:
                page: [ Capco\AppBundle\Behat\Page ]
        Behat\MinkExtension:
            base_url: 'http://capco.test'
            # browser_name: firefox
            browser_name: chrome
            sessions:
               default:
                    selenium2:
                        capabilities:
                            version: ''
                        wd_host: http://selenium:4444/wd/hub
    suites:
        javascript:
            paths: [ '%paths.base%/features/front' ]
            contexts:
                - Capco\AppBundle\Behat\ApplicationContext
                - Capco\AppBundle\Behat\NavigationContext
                - Alex\MailCatcher\Behat\MailCatcherContext
            filters:
                tags: "@javascript&&~@event_registration"

commands:
    formatters:
        pretty:
            verbose:  true
            paths:    true
            snippets: true
    extensions:
        Tonic\Behat\ParallelScenarioExtension: ~
        Behat\Symfony2Extension: ~
        Alex\MailCatcher\Behat\MailCatcherExtension\Extension:
            url: http://mailcatchersmtp
            purge_before_scenario: true
    suites:
        commands:
            paths: [ '%paths.base%/features/commands' ]
            contexts:
                - Capco\AppBundle\Behat\ApplicationContext
                - Capco\AppBundle\Behat\NavigationContext
                - Capco\AppBundle\Behat\CommandContext
                - Alex\MailCatcher\Behat\MailCatcherContext
                - SamParkinson\Behat\Context\FileSystemContext

api:
    extensions:
        Tonic\Behat\ParallelScenarioExtension: ~
        Behat\Symfony2Extension: ~
        Alex\MailCatcher\Behat\MailCatcherExtension\Extension:
            url: http://mailcatchersmtp
            purge_before_scenario: true
    suites:
        api:
            paths: [ '%paths.base%/features/api' ]
            contexts:
                - Capco\AppBundle\Behat\ApiContext
                - Capco\AppBundle\Behat\NavigationContext
                - Alex\MailCatcher\Behat\MailCatcherContext

graphql:
    extensions:
          Behat\Symfony2Extension: ~
          Alex\MailCatcher\Behat\MailCatcherExtension\Extension:
              url: http://mailcatchersmtp
              purge_before_scenario: true
          Behat\MinkExtension:
              base_url: 'http://capco.test'
              # browser_name: firefox
              browser_name: chrome
              sessions:
                 default:
                      selenium2:
                          capabilities:
                              version: ''
                          wd_host: http://selenium:4444/wd/hub
    suites:
        graphql:
            paths:
                - '%paths.base%/features/graphql'
                - '%paths.base%/features/graphql/mutations'
            contexts:
                - Capco\AppBundle\Behat\ApplicationContext
                - Capco\AppBundle\Behat\NavigationContext
                - Capco\AppBundle\Behat\GraphQLContext
                - Alex\MailCatcher\Behat\MailCatcherContext

back:
    extensions:
        Alex\MailCatcher\Behat\MailCatcherExtension\Extension:
            url: http://mailcatchersmtp
            purge_before_scenario: true
        Behat\Symfony2Extension:
            kernel:
                env: test
                debug: false
        SensioLabs\Behat\PageObjectExtension:
            namespaces:
                page: [ Capco\AppBundle\Behat\Page ]
        Behat\MinkExtension:
            base_url: 'http://capco.test'
            browser_name: chrome
            sessions:
               default:
                    selenium2:
                        capabilities:
                            version: ''
                        wd_host: http://selenium:4444/wd/hub
    suites:
        javascript:
            paths: [ '%paths.base%/features/back' ]
            contexts:
                - Capco\AppBundle\Behat\ApplicationContext
                - Capco\AppBundle\Behat\NavigationContext
                - Alex\MailCatcher\Behat\MailCatcherContext
