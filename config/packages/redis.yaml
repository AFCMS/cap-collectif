snc_redis:
    clients:
        default:
            type: predis
            alias: default
            dsn: '%redis_dsn%'
            logging: '%kernel.debug%'
        # Session have issues with predis
        session:
            type: phpredis
            alias: session
            dsn: '%redis_dsn%'
            logging: false
    session:
        client: session
        prefix: '%redis_prefix%session_%kernel.environment%_' # We add env in prefix to allow multi environments sessions in dev
        # /!\ Our session data should be "read-only" :
        # we use parallel requests and want to avoid cascading requests.
        #
        # Unfortunately we are currently using some flash messages that write in the session,
        # so we are stuck until we fix thisâ€¦
        #
        # TODO https://github.com/cap-collectif/platform/issues/12189
        locking: true
    doctrine:
        metadata_cache:
            client: default
            entity_manager: default
            document_manager: default
            namespace: '%redis_prefix%metadata_cache_%kernel.environment%_'
        result_cache:
            client: default
            entity_manager: default
            namespace: '%redis_prefix%result_cache_%kernel.environment%_'
        query_cache:
            client: default
            entity_manager: default
            namespace: '%redis_prefix%query_cache_%kernel.environment%_'
