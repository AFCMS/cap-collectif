application:
    build: ./infrastructure/services/local
    volumes:
        - .:/var/www
        - ./data/mysql/:/var/lib/mysql
    ports:
        - "80:80"
        - "6379:6379"
    environment:
        SYMFONY_ENV: dev
    volumes_from:
        - applicationdata

applicationdata:
    build: ./infrastructure/services/applicationdata
    volumes:
        - ./data/media:/var/www/web/media
        - ./data/redis:/data
    command: echo "I'm a data container"

builder:
    build: ./infrastructure/services/builder
    volumes:
        - .:/capco
        - ~/.composer:/home/capco/.composer
        - ~/.npm:/home/capco/.npm
        - ~/.cache/bower:/home/capco/.cache/bower
    command: echo "Use 'docker-compose run builder build' to build deps"

# behat:
#     build: infrastructure/services/behat
#     links:
#         - application:application
#         - seleniumhub:selenium
#     volumes:
#         - .:/var/www/html

# seleniumhub:
#     image: selenium/hub

# seleniumnode:
#     image: selenium/node-firefox
#     # image: selenium/node-chrome
#     links:
#         - seleniumhub:hub
#         - application:application
