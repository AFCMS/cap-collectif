application:
    environment:
        DOCKER_GID: 100
    volumes:
        - ../../:/var/www
        - /var/run/docker.sock:/var/run/docker.sock
        - /usr/local/bin/docker:/usr/bin/docker
    links:
        - database:database
        - elasticsearch:elasticsearch
        - redis:redis
        - seleniumhub:selenium
        - mailcatcher:mailcatchersmtp
        - blackfire:blackfire

blackfire:
    image: blackfire/blackfire:latest
    environment:
        - BLACKFIRE_LOG_LEVEL=4
        - BLACKFIRE_SERVER_ID=c5118c2f-055f-4385-9c8a-ac31955ffb20
        - BLACKFIRE_SERVER_TOKEN=***REMOVED***

elasticsearch:
    image: elasticsearch:1.7.3
    volumes:
        - ../services/local/elasticsearch/capco.yml:/etc/elasticsearch/config/elasticsearch.yml
    ports:
        - "9200:9200"

database:
    ports:
        - "3306:3306"

chrome:
   ports:
        - "5900:5900"

# You can also test on a different browser
# firefox:
#   image: selenium/node-firefox-debug:latest
#   links:
#     - seleniumhub:hub
#     - application:application
#   ports:
#     - "5901:5900"
