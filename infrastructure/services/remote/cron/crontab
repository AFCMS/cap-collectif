# /etc/cron.d/crontab

### Please go here to check your values :
### Go use https://crontab.guru


# Recalculate counters that have changed at every 2nd minute.
*/2 * * * * /usr/local/bin/source_cron_env; /usr/bin/timeout 1m /usr/local/bin/gosu capco php -d memory_limit=$CAPCO_CRON_COMPUTE_PHP_MEMORY_LIMIT /var/www/bin/console capco:compute:users-counters --env=prod

# Recalculate users counters from scratch at 04:00.
0 4 * * * /usr/local/bin/source_cron_env; /usr/bin/timeout 5m /usr/local/bin/gosu capco php -d memory_limit=$CAPCO_CRON_COMPUTE_PHP_MEMORY_LIMIT /var/www/bin/console capco:compute:users-counters --force --env=prod

# Generate exports at minute 0 every hour.
0 * * * * /usr/local/bin/source_cron_env; /usr/bin/timeout 50m /usr/local/bin/gosu capco php -d memory_limit=$CAPCO_CRON_EXPORT_PHP_MEMORY_LIMIT -d zend.enable_gc=0 /var/www/bin/console capco:export:consultation --env=prod --quiet
0 * * * * /usr/local/bin/source_cron_env; /usr/bin/timeout 50m /usr/local/bin/gosu capco php -d memory_limit=$CAPCO_CRON_EXPORT_PHP_MEMORY_LIMIT -d zend.enable_gc=0 /var/www/bin/console capco:export:questionnaire --env=prod --quiet
0 * * * * /usr/local/bin/source_cron_env; /usr/bin/timeout 50m /usr/local/bin/gosu capco php -d memory_limit=$CAPCO_CRON_EXPORT_PHP_MEMORY_LIMIT -d zend.enable_gc=0 /var/www/bin/console capco:export:proposalStep --env=prod --quiet
0 * * * * /usr/local/bin/source_cron_env; /usr/bin/timeout 50m /usr/local/bin/gosu capco php -d memory_limit=$CAPCO_CRON_EXPORT_PHP_MEMORY_LIMIT -d zend.enable_gc=0 /var/www/bin/console capco:export:events:participants --env=prod --quiet
0 * * * * /usr/local/bin/source_cron_env; /usr/bin/timeout 50m /usr/local/bin/gosu capco php -d memory_limit=$CAPCO_CRON_EXPORT_PHP_MEMORY_LIMIT -d zend.enable_gc=0 /var/www/bin/console capco:export:legacyUsers --env=prod --quiet
0 * * * * /usr/local/bin/source_cron_env; /usr/bin/timeout 50m /usr/local/bin/gosu capco php -d memory_limit=$CAPCO_CRON_EXPORT_PHP_MEMORY_LIMIT -d zend.enable_gc=0 /var/www/bin/console capco:export:events --env=prod --quiet
0 * * * * /usr/local/bin/source_cron_env; /usr/bin/timeout 50m /usr/local/bin/gosu capco php -d memory_limit=$CAPCO_CRON_EXPORT_PHP_MEMORY_LIMIT -d zend.enable_gc=0 /var/www/bin/console capco:export:step-contributors --env=prod --quiet
0 * * * * /usr/local/bin/source_cron_env; /usr/bin/timeout 50m /usr/local/bin/gosu capco php -d memory_limit=$CAPCO_CRON_EXPORT_PHP_MEMORY_LIMIT -d zend.enable_gc=0 /var/www/bin/console capco:export:analysis --env=prod --quiet
0 * * * * /usr/local/bin/source_cron_env; /usr/bin/timeout 50m /usr/local/bin/gosu capco php -d memory_limit=$CAPCO_CRON_EXPORT_PHP_MEMORY_LIMIT -d zend.enable_gc=0 /var/www/bin/console capco:export:analysis --only-decisions --env=prod --quiet
0 * * * * /usr/local/bin/source_cron_env; /usr/bin/timeout 50m /usr/local/bin/gosu capco php -d memory_limit=$CAPCO_CRON_EXPORT_PHP_MEMORY_LIMIT -d zend.enable_gc=0 /var/www/bin/console capco:export:debate --env=prod --quiet

# Process analysis at minute 0 every hour.
0 * * * * /usr/local/bin/source_cron_env; /usr/bin/timeout 50m /usr/local/bin/gosu capco php -d memory_limit=$CAPCO_CRON_EXPORT_PHP_MEMORY_LIMIT -d zend.enable_gc=0 /var/www/bin/console capco:process_proposals --env=prod --quiet

# At minute 0 past every 12th hour.
0 */12 * * * /usr/local/bin/source_cron_env; /usr/bin/timeout 480m /usr/local/bin/gosu capco php -d memory_limit=$CAPCO_CRON_EXPORT_PHP_MEMORY_LIMIT -d zend.enable_gc=0 /var/www/bin/console capco:export:projects-contributors --env=prod --quiet

# Remind users to confirm their account at minute 0 every hour.
*/15 * * * * /usr/local/bin/source_cron_env; /usr/bin/timeout 50m /usr/local/bin/gosu capco php -d memory_limit=$CAPCO_CRON_EXPORT_PHP_MEMORY_LIMIT -d zend.enable_gc=0 /var/www/bin/console capco:remind-user-account-confirmation --env=prod

# Delete user archives at minute 0 every hour.
0 * * * * /usr/local/bin/source_cron_env; /usr/bin/timeout 50m /usr/local/bin/gosu capco php -d memory_limit=$CAPCO_CRON_EXPORT_PHP_MEMORY_LIMIT -d zend.enable_gc=0 /var/www/bin/console capco:user_archives:delete --env=prod

# Send activities email to follower, every day at 9 AM
0 9 * * * /usr/local/bin/source_cron_env; /usr/bin/timeout 50m /usr/local/bin/gosu capco php -d memory_limit=$CAPCO_CRON_COMPUTE_PHP_MEMORY_LIMIT /var/www/bin/console capco:follower-notifier --env=prod

# Send Planned emailing campaigns every 5 minutes.
*/5 * * * * /usr/local/bin/source_cron_env; /usr/bin/timeout 5m /usr/local/bin/gosu capco php -d memory_limit=$CAPCO_CRON_COMPUTE_PHP_MEMORY_LIMIT /var/www/bin/console capco:send-emailing-campaign --env=prod

# Cache TipsMeee computed data every minute.
* * * * * /usr/local/bin/source_cron_env; /usr/bin/timeout 1m /usr/local/bin/gosu capco php -d memory_limit=$CAPCO_CRON_EXPORT_PHP_MEMORY_LIMIT -d zend.enable_gc=0 /var/www/bin/console capco:compute:tipsmeee-data --env=prod --quiet

# Publish entities with planned publication every 5 minutes.
*/5 * * * * /usr/local/bin/source_cron_env; /usr/bin/timeout 5m /usr/local/bin/gosu capco php -d memory_limit=$CAPCO_CRON_COMPUTE_PHP_MEMORY_LIMIT /var/www/bin/console capco:publisher --env=prod
