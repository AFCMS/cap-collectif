services:
  filter.configurator:
      class: Capco\AdminBundle\EventListener\FilterConfigurator
      arguments: ["@doctrine.orm.entity_manager"]
      tags:
        - { name: kernel.event_listener, event: kernel.controller }

  capco.resolver.proposal_form:
      class: Capco\AppBundle\GraphQL\Resolver\ProposalFormResolver
      tags:
          - { name: overblog_graphql.resolver, alias: "proposalForms", method: "resolveAll" }
          - { name: overblog_graphql.resolver, alias: "proposal_form_proposals", method: "resolveProposals" }
          - { name: overblog_graphql.resolver, alias: "proposal_form_districts", method: "resolveDistricts" }
          - { name: overblog_graphql.resolver, alias: "proposal_form_questions", method: "resolveQuestions" }
          - { name: overblog_graphql.resolver, alias: "query_proposalForm", method: "resolve" }
          - { name: overblog_graphql.resolver, alias: "proposal_form_url", method: "resolveUrl" }
          - { name: overblog_graphql.resolver, alias: "proposal_form_categories", method: "resolveCategories" }
          - { name: overblog_graphql.resolver, alias: "proposal_form_step", method: "resolveStepType" }
          - { name: overblog_graphql.resolver, alias: "proposal_form_summaryHelpText", method: "resolveSummaryHelpText" }

  capco.resolver.question:
    class: Capco\AppBundle\GraphQL\Resolver\QuestionResolver
    tags:
      - { name: overblog_graphql.resolver, alias: "query_question", method: "resolve" }
      - { name: overblog_graphql.resolver, alias: "question_type", method: "resolveType" }
      - { name: overblog_graphql.resolver, alias: "question_position", method: "resolvePosition" }
      - { name: overblog_graphql.resolver, alias: "query_available_districts_for_location", method: "resolveDistrictsForLocalisation" }
      - { name: overblog_graphql.resolver, alias: "question_choices", method: "resolveChoices" }
      - { name: overblog_graphql.resolver, alias: "question_isOtherAllowed", method: "resolveisOtherAllowed" }
      - { name: overblog_graphql.resolver, alias: "question_validation_rule", method: "resolveValidationRule" }
      - { name: overblog_graphql.resolver, alias: "query_get_available_questionnaires", method: "resolveAvailableQuestionnaires" }
      - { name: overblog_graphql.resolver, alias: "question_question_type", method: "resolveQuestionType" }
      - { name: overblog_graphql.resolver, alias: "query_questionnaire", method: "resolveQuestionnaire" }
      - { name: overblog_graphql.resolver, alias: "questionnaire_questions", method: "resolveQuestionnaireQuestions" }

  capco.resolver.proposals:
      class: Capco\AppBundle\GraphQL\Resolver\ProposalResolver
      tags:
          - { name: overblog_graphql.resolver, alias: "proposal_viewer_is_evaluer", method: "resolveViewerIsEvaluer" }
          - { name: overblog_graphql.resolver, alias: "proposal_show_url", method: "resolveShowUrl" }
          - { name: overblog_graphql.resolver, alias: "proposal_admin_url", method: "resolveAdminUrl" }
          - { name: overblog_graphql.resolver, alias: "post_abstract", method: "resolvePostAbstract" }
          - { name: overblog_graphql.resolver, alias: "proposal_news", method: "resolveNews" }
          - { name: overblog_graphql.resolver, alias: "project_steps", method: "resolveProjectSteps" }
          - { name: overblog_graphql.resolver, alias: "step_type", method: "resolveStepType" }
          - { name: overblog_graphql.resolver, alias: "response_type", method: "resolveResponseType" }
          - { name: overblog_graphql.resolver, alias: "query_proposal", method: "resolve" }
          - { name: overblog_graphql.resolver, alias: "proposal_publicationStatus", method: "resolveProposalPublicationStatus" }
          - { name: overblog_graphql.resolver, alias: "proposal_reference", method: "resolveReference" }
          - { name: overblog_graphql.resolver, alias: "proposal_evaluation", method: "resolveEvaluation" }
          - { name: overblog_graphql.resolver, alias: "query_get_draft_proposals_for_user_in_step", method: "resolveDraftProposalsForUserInStep" }
          - { name: overblog_graphql.resolver, alias: "proposal_created_at", method: "resolveCreatedAt" }
          - { name: overblog_graphql.resolver, alias: "proposal_posts_count", method: "resolvePostsCount" }
          - { name: overblog_graphql.resolver, alias: "proposal_viewer_can_see_evaluation", method: "resolveViewerCanSeeEvaluation" }

  capco.mutation.user_notifications:
        class: Capco\AppBundle\GraphQL\Mutation\UserNotificationsConfigurationMutation
        tags:
            - { name: overblog_graphql.mutation, alias: "changeUserNotificationsConfiguration", method: "change" }
  capco.mutation.district:
        class: Capco\AppBundle\GraphQL\Mutation\DistrictMutation
        tags:
            - { name: overblog_graphql.mutation, alias: "changeDistrict", method: "change" }

  capco.mutation.proposal:
        class: Capco\AppBundle\GraphQL\Mutation\ProposalMutation
        tags:
            - { name: overblog_graphql.mutation, alias: "deleteProposal", method: "delete" }
            - { name: overblog_graphql.mutation, alias: "changeProposalNotation", method: "changeNotation" }
            - { name: overblog_graphql.mutation, alias: "changeProposalEvaluers", method: "changeEvaluers" }
            - { name: overblog_graphql.mutation, alias: "changeProgressSteps", method: "changeProgressSteps" }
            - { name: overblog_graphql.mutation, alias: "changeCollectStatus", method: "changeCollectStatus" }
            - { name: overblog_graphql.mutation, alias: "changeSelectionStatus", method: "changeSelectionStatus" }
            - { name: overblog_graphql.mutation, alias: "unselectProposal", method: "unselectProposal" }
            - { name: overblog_graphql.mutation, alias: "selectProposal", method: "selectProposal" }
            - { name: overblog_graphql.mutation, alias: "changeProposalPublicationStatus", method: "changePublicationStatus" }
            - { name: overblog_graphql.mutation, alias: "changeProposalContent", method: "changeContent" }
            - { name: overblog_graphql.mutation, alias: "createProposal", method: "create" }

  capco.mutation.proposal_form:
    class: Capco\AppBundle\GraphQL\Mutation\ProposalFormMutation
    tags:
      - { name: overblog_graphql.mutation, alias: "createProposalForm", method: "create" }
      - { name: overblog_graphql.mutation, alias: "updateProposalForm", method: "update" }
      - { name: overblog_graphql.mutation, alias: "changeProposalFormParameters", method: "changeParameters" }
      - { name: overblog_graphql.mutation, alias: "updateProposalFormNotificationsConfiguration", method: "updateNotificationsConfiguration" }
      - { name: overblog_graphql.mutation, alias: "setEvaluationFormInProposalForm", method: "setEvaluationForm" }

  capco.resolver.consultations:
      class: Capco\AppBundle\GraphQL\Resolver\ConsultationResolver
      tags:
          - { name: overblog_graphql.resolver, alias: "sectionappendixtype_id", method: "getSectionAppendixId" }
          - { name: overblog_graphql.resolver, alias: "sectionappendixtype_title", method: "getSectionAppendixTitle" }
          - { name: overblog_graphql.resolver, alias: "consultationContributionsRelay", method: "getConsultationContributionsConnection" }
          - { name: overblog_graphql.resolver, alias: "sectionContributionsRelay", method: "getSectionContributionsConnection" }
          - { name: overblog_graphql.resolver, alias: "section_url", method: "getSectionUrl" }
          - { name: overblog_graphql.resolver, alias: "query_section", method: "getSection" }
          - { name: overblog_graphql.resolver, alias: "contributionsBySection", method: "getContributionsBySection" }
          - { name: overblog_graphql.resolver, alias: "section_contributionsCount", method: "getSectionOpinionsCount" }
          - { name: overblog_graphql.resolver, alias: "section_contributions", method: "getSectionOpinions" }
          - { name: overblog_graphql.resolver, alias: "section_sections", method: "getSectionChildren" }
          - { name: overblog_graphql.resolver, alias: "consultation", method: "resolve" }
          - { name: overblog_graphql.resolver, alias: "consultation_contributions", method: "resolveContributions" }
          - { name: overblog_graphql.resolver, alias: "proposition_section", method: "resolvePropositionSection" }
          - { name: overblog_graphql.resolver, alias: "consultation_sections", method: "resolveConsultationSections" }
          - { name: overblog_graphql.resolver, alias: "proposition_arguments", method: "resolvePropositionArguments" }
          - { name: overblog_graphql.resolver, alias: "proposition_url", method: "resolvePropositionUrl" }
          - { name: overblog_graphql.resolver, alias: "proposition_votes", method: "resolvePropositionVotes" }
          - { name: overblog_graphql.resolver, alias: "proposition_vote_proposition", method: "resolvePropositionVoteProposition" }
          - { name: overblog_graphql.resolver, alias: "proposition_vote_author", method: "resolvePropositionVoteAuthor" }
          - { name: overblog_graphql.resolver, alias: "votesByContribution", method: "resolveVotesByContribution" }
          - { name: overblog_graphql.resolver, alias: "consultation_contribuable", method: "resolveConsultationIsContribuable" }
          - { name: overblog_graphql.resolver, alias: "contributions", method: "resolveContributionsByConsultation" }
          - { name: overblog_graphql.resolver, alias: "proposition_createdAt", method: "resolveCreatedAt" }
          - { name: overblog_graphql.resolver, alias: "proposition_updatedAt", method: "resolveUpdatedAt" }
          - { name: overblog_graphql.resolver, alias: "proposition_trashedAt", method: "resolveTrashedAt" }
          - { name: overblog_graphql.resolver, alias: "proposition_votesCount", method: "resolveContributionVotesCount" }
          - { name: overblog_graphql.resolver, alias: "proposition_argumentsCountFor", method: "resolveArgumentsCountFor" }
          - { name: overblog_graphql.resolver, alias: "proposition_argumentsCountAgainst", method: "resolveArgumentsCountAgainst" }
          - { name: overblog_graphql.resolver, alias: "argument_url", method: "resolveArgumentUrl" }
          - { name: overblog_graphql.resolver, alias: "proposition_reportings", method: "resolvePropositionReportings" }
          - { name: overblog_graphql.resolver, alias: "reporting_author", method: "resolveReportingAuthor" }
          - { name: overblog_graphql.resolver, alias: "reporting_type", method: "resolveReportingType" }
          - { name: overblog_graphql.resolver, alias: "version_url", method: "resolveVersionUrl" }
          - { name: overblog_graphql.resolver, alias: "version_reportings", method: "resolveVersionReportings" }
          - { name: overblog_graphql.resolver, alias: "vote_createdAt", method: "resolverPropositionVoteCreatedAt" }
          - { name: overblog_graphql.resolver, alias: "version_votes", method: "resolveVersionVotes" }
          - { name: overblog_graphql.resolver, alias: "contribution_type", method: "resolveContributionType" }
  capco.resolvers.users:
    class: Capco\AppBundle\GraphQL\Resolver\UserResolver
    tags:
        - { name: overblog_graphql.resolver, alias: "user", method: "resolve" }
        - { name: overblog_graphql.resolver, alias: "current_user", method: "resolveCurrentUser" }
        - { name: overblog_graphql.resolver, alias: "user_email", method: "resolveEmail" }
        - { name: overblog_graphql.resolver, alias: "user_show_url", method: "resolveShowUrl" }
        - { name: overblog_graphql.resolver, alias: "user_createdAt", method: "resolveCreatedAt" }
        - { name: overblog_graphql.resolver, alias: "user_updatedAt", method: "resolveUpdatedAt" }
        - { name: overblog_graphql.resolver, alias: "user_lastLogin", method: "resolveLastLogin" }
        - { name: overblog_graphql.resolver, alias: "user_phoneConfirmationSentAt", method: "resolvePhoneConfirmationSentAt" }
        - { name: overblog_graphql.resolver, alias: "user_dateOfBirth", method: "resolveDateOfBirth" }
        - { name: overblog_graphql.resolver, alias: "user_gender", method: "resolveGender" }
        - { name: overblog_graphql.resolver, alias: "user_rolesText", method: "resolveRolesText" }

  Capco\AppBundle\GraphQL\Resolver\UserFollowingProposalResolver:
    class: Capco\AppBundle\GraphQL\Resolver\UserFollowingProposalResolver
    arguments:
        - "@capco.user.repository"
        - "@logger"
    tags:
      - { name: overblog_graphql.resolver }

  Capco\AppBundle\GraphQL\Resolver\ViewerFollowProposalResolver:
    class: Capco\AppBundle\GraphQL\Resolver\ViewerFollowProposalResolver
    arguments:
        - "@capco.user.repository"
        - "@logger"
    tags:
      - { name: overblog_graphql.resolver }

  Capco\AppBundle\GraphQL\Resolver\ProposalsFollowedByUserResolver:
    class: Capco\AppBundle\GraphQL\Resolver\ProposalsFollowedByUserResolver
    arguments:
        - "@capco.proposal.repository"
        - "@logger"
    tags:
      - { name: overblog_graphql.resolver }

  Capco\AppBundle\GraphQL\Resolver\ProposalFollowerConnection:
    class: Capco\AppBundle\GraphQL\Resolver\ProposalFollowerConnection
    arguments:
        - "@capco.user.repository"
        - "@logger"
    tags:
      - { name: overblog_graphql.resolver }

  capco.resolvers.groups:
    class: Capco\AppBundle\GraphQL\Resolver\GroupResolver
    tags:
        - { name: overblog_graphql.resolver, alias: "groups", method: "resolveAll" }
        - { name: overblog_graphql.resolver, alias: "group", method: "resolve" }
        - { name: overblog_graphql.resolver, alias: "query_group", method: "resolve" }
        - { name: overblog_graphql.resolver, alias: "group_users_connection", method: "resolveUsersConnection" }

  capco.mutation.groups:
    class: Capco\AppBundle\GraphQL\Mutation\GroupMutation
    tags:
        - { name: overblog_graphql.mutation, alias: "createGroup", method: "create" }
        - { name: overblog_graphql.mutation, alias: "updateGroup", method: "update" }
        - { name: overblog_graphql.mutation, alias: "deleteGroup", method: "delete" }
        - { name: overblog_graphql.mutation, alias: "deleteUserInGroup", method: "deleteUserInGroup" }
        - { name: overblog_graphql.mutation, alias: "addUsersInGroup", method: "addUsersInGroup" }

  capco.resolver.evaluation_forms:
    class: Capco\AppBundle\GraphQL\Resolver\EvaluationFormResolver
    tags:
      - { name: overblog_graphql.resolver, alias: "evaluation_form_questions", method: "resolveQuestions" }

  capco.resolver.response:
    class: Capco\AppBundle\GraphQL\Resolver\ResponseResolver
    tags:
      - { name: overblog_graphql.resolver, alias: "response_value", method: "resolveValue" }

  capco.resolver.proposal_evaluations:
    class: Capco\AppBundle\GraphQL\Resolver\ProposalEvaluationResolver
    tags:
          - { name: overblog_graphql.resolver, alias: "proposal_evaluation_responses", method: "resolveResponses" }
          - { name: overblog_graphql.resolver, alias: "response_type", method: "resolveResponseType" }

  capco.mutation.proposal_evaluation:
    class: Capco\AppBundle\GraphQL\Mutation\ProposalEvaluationMutation
    tags:
      - { name: overblog_graphql.mutation, alias: "changeProposalEvaluation", method: "changeProposalEvaluation" }

  capco.resolver.value_responses:
    class: Capco\AppBundle\GraphQL\Resolver\ValueResponseResolver
    tags:
          - { name: overblog_graphql.resolver, alias: "value_response_value", method: "resolveValue" }
