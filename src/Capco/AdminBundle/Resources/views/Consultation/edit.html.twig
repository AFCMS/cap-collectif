{% extends 'SonataAdminBundle:CRUD:base_edit.html.twig' %}

{% block form %}
    {{ parent() }}
    {% if admin.subject.id is null %}
        <script type="text/javascript">
            $(document).ready(function() {
                $("#field_actions_{{ admin.uniqid }}_opinionTypes .btn-success").on('click', function(e) {
                    var name = $("#{{ admin.uniqid }}_title").val();
                    if (name !== null && name !== '') {
                        var url = $(this).attr('href') + '&consultation_name=' + name;
                        $(this).attr('href', url);
                        $("#{{ admin.uniqid }}_title").val('');
                    }
                    return true;
                });
            });
        </script>
    {% else %}
        <script type="text/javascript">
            (function () {
                document.querySelector('.sonata-ba-action').setAttribute('target', '__blank');
            })()
        </script>
    {% endif %}
{% endblock %}
