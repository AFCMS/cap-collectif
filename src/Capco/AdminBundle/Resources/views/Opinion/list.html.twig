{% extends 'SonataAdminBundle:CRUD:base_list.html.twig' %}

{% block actions %}
{% spaceless %}
    {% if admin.hasRoute('create') and admin.isGranted('CREATE')%}
        <p class="navbar-btn">
            <button type="button" class="btn btn-link" data-toggle="modal" data-target="#opinion-create-modal">
                <i class="fa fa-plus-circle"></i>
                {{ 'link_action_create'|trans({}, 'SonataAdminBundle') }}
            </button>
        </p>
    {% endif %}
{% endspaceless %}
{% endblock %}

{% block list_table %}
    {{ parent() }}
    <div class="modal fade" id="opinion-create-modal" tabindex="-1" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Choisissez le type de proposition à créer</h4>
                </div>
                <div class="modal-body">
                    {% if consultationStepTypes | length > 0 %}
                        <ul style="list-style-type: none;">
                            {% for consultationStepType, opinionTypes in consultationStepTypes %}
                                <li>
                                    <span class="dropdown-header" style="padding: 15px 0px 5px;">
                                        {{ consultationStepType }}
                                    </span>
                                </li>
                                {% for html in opinionTypes %}
                                    {{ html | raw }}
                                {% endfor %}
                            {% endfor %}
                        </ul>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
{% endblock %}
