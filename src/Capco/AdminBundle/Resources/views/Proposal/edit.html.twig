{% extends 'SonataAdminBundle:CRUD:base_edit.html.twig' %}

{% block sonata_breadcrumb %}
{% endblock %}

{% block form %}
{% include '@CapcoApp/redux_store.html.twig' with {
  'project': admin.subject.proposalForm.step.getProject(),
  'data' : {
    'proposal': {
      'proposalsById': {
        (admin.subject.id) : {
          'selections': [],
          'status': admin.subject.status
          ? {
              'id': admin.subject.status.id,
              'name': admin.subject.status.name
            }
         : null
        }
      },
    }
  }
}
%}
{{ react_render_component('ProposalAdminPageApp', {
  'props': {
    'proposalId': admin.subject.id,
  },
  'rendering': 'client_side'
}) }}
{% endblock %}

{% block javascripts %}
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=***REMOVED***&libraries=places"></script>
{{ parent() }}
    <script>
        (function () {
            jQuery('form').one('change', function () {
                alert('ok');
                window.onbeforeunload = function () {
                    return true;
                };
            });
        })();
    </script>
{% endblock %}
