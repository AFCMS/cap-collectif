Mutation:
    type: object
    config:
        fields:
        # Proposal
          changeProposalPublicationStatus:
                access: "@=hasRole('ROLE_ADMIN')"
                builder: "Relay::Mutation"
                builderConfig:
                    inputType: ChangeProposalPublicationStatusInput
                    payloadType: ChangeProposalPublicationStatusPayload
                    mutateAndGetPayload: "@=mutation('changeProposalPublicationStatus', [value, user])"
          changeProposalContent:
                access: "@=hasRole('ROLE_ADMIN')" # For now mutation only used in BO
                builder: "Relay::Mutation"
                builderConfig:
                    inputType: ChangeProposalContentInput
                    payloadType: ChangeProposalContentPayload
                    mutateAndGetPayload: "@=mutation('changeProposalContent', [value, request, user])"
          changeProposalNotation:
                access: "@=hasRole('ROLE_ADMIN')"
                builder: "Relay::Mutation"
                builderConfig:
                    inputType: ChangeProposalNotationInput
                    payloadType: ChangeProposalNotationPayload
                    mutateAndGetPayload: "@=mutation('changeProposalNotation', [value])"
          selectProposal:
                access: "@=hasRole('ROLE_ADMIN')"
                builder: "Relay::Mutation"
                builderConfig:
                    inputType: SelectProposalInput
                    payloadType: SelectProposalPayload
                    mutateAndGetPayload: "@=mutation('selectProposal', [value['proposalId'], value['stepId'], value['statusId']])"
          unselectProposal:
              access: "@=hasRole('ROLE_ADMIN')"
              builder: "Relay::Mutation"
              builderConfig:
                  inputType: UnselectProposalInput
                  payloadType: UnselectProposalPayload
                  mutateAndGetPayload: "@=mutation('unselectProposal', [value['proposalId'], value['stepId']])"
          changeSelectionStatus:
              access: "@=hasRole('ROLE_ADMIN')"
              builder: "Relay::Mutation"
              builderConfig:
                  inputType: ChangeSelectionStatusInput
                  payloadType: ChangeSelectionStatusPayload
                  mutateAndGetPayload: "@=mutation('changeSelectionStatus', [ value['proposalId'], value['stepId'], value['statusId'] ])"
          changeCollectStatus:
              access: "@=hasRole('ROLE_ADMIN')"
              builder: "Relay::Mutation"
              builderConfig:
                  inputType: ChangeCollectStatusInput
                  payloadType: ChangeCollectStatusPayload
                  mutateAndGetPayload: "@=mutation('changeCollectStatus', [value['proposalId'], value['statusId'] ])"
          changeProposalProgressSteps:
              access: "@=hasRole('ROLE_ADMIN')"
              builder: "Relay::Mutation"
              builderConfig:
                  inputType: ChangeProposalProgressStepsInput
                  payloadType: ChangeProposalProgressStepsPayload
                  mutateAndGetPayload: "@=mutation('changeProgressSteps', [value])"
          deleteProposal:
              access: "@=hasRole('ROLE_SUPER_ADMIN') or service('capco.proposal.helper').isAuthor(args['input']['proposalId'], user)"
              builder: "Relay::Mutation"
              builderConfig:
                  inputType: DeleteProposalInput
                  payloadType: DeleteProposalPayload
                  mutateAndGetPayload: "@=mutation('deleteProposal', [value['proposalId']])"

          # Proposal Form
          createProposalForm:
              access: "@=hasRole('ROLE_ADMIN')"
              builder: "Relay::Mutation"
              builderConfig:
                  inputType: CreateProposalFormInput
                  payloadType: CreateProposalFormPayload
                  mutateAndGetPayload: "@=mutation('createProposalFrom', [value])"
          changeDistrict:
              access: "@=hasRole('ROLE_ADMIN')"
              builder: "Relay::Mutation"
              builderConfig:
                  inputType: ChangeDistrictInput
                  payloadType: ChangeDistrictPayload
                  mutateAndGetPayload: "@=mutation('changeDistrict', [value])"
