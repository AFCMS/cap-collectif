Mutation:
    type: object
    config:
        fields:
        # User notifications
          changeUserNotificationsConfiguration:
                access: "@=isAuthenticated()"
                builder: "Relay::Mutation"
                builderConfig:
                    inputType: ChangeUserNotificationsConfigurationInput
                    payloadType: ChangeUserNotificationsConfigurationPayload
                    mutateAndGetPayload: "@=mutation('changeUserNotificationsConfiguration', [value, user])"
        # Proposal
          changeProposalPublicationStatus:
                access: "@=hasRole('ROLE_ADMIN')"
                builder: "Relay::Mutation"
                builderConfig:
                    inputType: ChangeProposalPublicationStatusInput
                    payloadType: ChangeProposalPublicationStatusPayload
                    mutateAndGetPayload: "@=mutation('changeProposalPublicationStatus', [value, user])"
          changeProposalContent:
                access: "@=hasRole('ROLE_USER')"
                builder: "Relay::Mutation"
                builderConfig:
                    inputType: ChangeProposalContentInput
                    payloadType: ChangeProposalContentPayload
                    mutateAndGetPayload: "@=mutation('changeProposalContent', [value, user])"
          createProposal:
                access: "@=hasRole('ROLE_USER')"
                builder: "Relay::Mutation"
                builderConfig:
                    inputType: CreateProposalInput
                    payloadType: CreateProposalPayload
                    mutateAndGetPayload: "@=mutation('createProposal', [value, user])"
          createProposalFusion:
               access: "@=hasRole('ROLE_ADMIN')"
               builder: "Relay::Mutation"
               builderConfig:
                   inputType: CreateProposalFusionInput
                   payloadType: CreateProposalFusionPayload
                   mutateAndGetPayload: "@=mutation('createProposalFusion', [value, user])"
          changeProposalNotation:
                access: "@=hasRole('ROLE_ADMIN')"
                builder: "Relay::Mutation"
                builderConfig:
                    inputType: ChangeProposalNotationInput
                    payloadType: ChangeProposalNotationPayload
                    mutateAndGetPayload: "@=mutation('changeProposalNotation', [value])"
          changeProposalEvaluers:
                access: "@=hasRole('ROLE_ADMIN')"
                builder: "Relay::Mutation"
                builderConfig:
                    inputType: ChangeProposalEvaluersInput
                    payloadType: ChangeProposalEvaluersPayload
                    mutateAndGetPayload: "@=mutation('changeProposalEvaluers', [value])"
          selectProposal:
                access: "@=hasRole('ROLE_ADMIN')"
                builder: "Relay::Mutation"
                builderConfig:
                    inputType: SelectProposalInput
                    payloadType: SelectProposalPayload
                    mutateAndGetPayload: "@=mutation('selectProposal', [value['proposalId'], value['stepId'], value['statusId']])"
          unselectProposal:
              access: "@=hasRole('ROLE_ADMIN')"
              builder: "Relay::Mutation"
              builderConfig:
                  inputType: UnselectProposalInput
                  payloadType: UnselectProposalPayload
                  mutateAndGetPayload: "@=mutation('unselectProposal', [value['proposalId'], value['stepId']])"
          changeSelectionStatus:
              access: "@=hasRole('ROLE_ADMIN')"
              builder: "Relay::Mutation"
              builderConfig:
                  inputType: ChangeSelectionStatusInput
                  payloadType: ChangeSelectionStatusPayload
                  mutateAndGetPayload: "@=mutation('changeSelectionStatus', [ value['proposalId'], value['stepId'], value['statusId'] ])"
          changeCollectStatus:
              access: "@=hasRole('ROLE_ADMIN')"
              builder: "Relay::Mutation"
              builderConfig:
                  inputType: ChangeCollectStatusInput
                  payloadType: ChangeCollectStatusPayload
                  mutateAndGetPayload: "@=mutation('changeCollectStatus', [value['proposalId'], value['statusId'] ])"
          changeProposalProgressSteps:
              access: "@=hasRole('ROLE_ADMIN')"
              builder: "Relay::Mutation"
              builderConfig:
                  inputType: ChangeProposalProgressStepsInput
                  payloadType: ChangeProposalProgressStepsPayload
                  mutateAndGetPayload: "@=mutation('changeProgressSteps', [value])"
          deleteProposal:
              access: "@=hasRole('ROLE_SUPER_ADMIN') or service('capco.proposal.helper').isAuthor(args['input']['proposalId'], user)"
              builder: "Relay::Mutation"
              builderConfig:
                  inputType: DeleteProposalInput
                  payloadType: DeleteProposalPayload
                  mutateAndGetPayload: "@=mutation('deleteProposal', [value['proposalId']])"

          # Proposal Form
          createProposalForm:
              access: "@=hasRole('ROLE_ADMIN')"
              builder: "Relay::Mutation"
              builderConfig:
                  inputType: CreateProposalFormInput
                  payloadType: CreateProposalFormPayload
                  mutateAndGetPayload: "@=mutation('createProposalForm', [value])"
          changeDistrict:
              access: "@=hasRole('ROLE_ADMIN')"
              builder: "Relay::Mutation"
              builderConfig:
                  inputType: ChangeDistrictInput
                  payloadType: ChangeDistrictPayload
                  mutateAndGetPayload: "@=mutation('changeDistrict', [value])"
          updateProposalForm:
              access: "@=hasRole('ROLE_ADMIN')"
              builder: "Relay::Mutation"
              builderConfig:
                  inputType: UpdateProposalFormInput
                  payloadType: UpdateProposalFormPayload
                  mutateAndGetPayload: "@=mutation('updateProposalForm', [value])"
          updateProposalFormNotificationsConfiguration:
              access: "@=hasRole('ROLE_ADMIN')"
              builder: "Relay::Mutation"
              builderConfig:
                  inputType: UpdateProposalFormNotificationsConfigurationInput
                  payloadType: UpdateProposalFormNotificationsConfigurationPayload
                  mutateAndGetPayload: "@=mutation('updateProposalFormNotificationsConfiguration', [value])"
          setEvaluationFormInProposalForm:
              access: "@=hasRole('ROLE_ADMIN')"
              builder: "Relay::Mutation"
              builderConfig:
                  inputType: SetEvaluationFormInProposalFormInput
                  payloadType: SetEvaluationFormInProposalFormPayload
                  mutateAndGetPayload: "@=mutation('setEvaluationFormInProposalForm', [value])"
          # Proposal Evaluation
          changeProposalEvaluation:
              access: "@=hasRole('ROLE_USER')"
              builder: "Relay::Mutation"
              builderConfig:
                  inputType: ChangeProposalEvaluationInput
                  payloadType: ChangeProposalEvaluationPayload
                  mutateAndGetPayload: "@=mutation('changeProposalEvaluation', [value, user])"
        # Groups
          createGroup:
              access: "@=hasRole('ROLE_ADMIN')"
              builder: "Relay::Mutation"
              builderConfig:
                  inputType: CreateGroupInput
                  payloadType: CreateGroupPayload
                  mutateAndGetPayload: "@=mutation('createGroup', [value])"
          updateGroup:
              access: "@=hasRole('ROLE_ADMIN')"
              builder: "Relay::Mutation"
              builderConfig:
                  inputType: UpdateGroupInput
                  payloadType: UpdateGroupPayload
                  mutateAndGetPayload: "@=mutation('updateGroup', [value])"
          deleteGroup:
            access: "@=hasRole('ROLE_ADMIN')"
            builder: "Relay::Mutation"
            builderConfig:
              inputType: DeleteGroupInput
              payloadType: DeleteGroupPayload
              mutateAndGetPayload: "@=mutation('deleteGroup', [value['groupId']])"
          deleteUserInGroup:
            access: "@=hasRole('ROLE_ADMIN')"
            builder: "Relay::Mutation"
            builderConfig:
              inputType: DeleteUserInGroupInput
              payloadType: DeleteUserInGroupPayload
              mutateAndGetPayload: "@=mutation('deleteUserInGroup', [value['userId'], value['groupId']])"
          addUsersInGroup:
            access: "@=hasRole('ROLE_ADMIN')"
            builder: "Relay::Mutation"
            builderConfig:
              inputType: AddUsersInGroupInput
              payloadType: AddUsersInGroupPayload
              mutateAndGetPayload: "@=mutation('addUsersInGroup', [value['users'], value['groupId']])"
