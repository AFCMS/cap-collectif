Sourceable:
  type: interface
  config:
    description: 'A sourceable'
    resolveType: "@=resolver('contribution_type', [value])"
    fields:
      id:
        type: 'ID!'
      contribuable:
        type: 'Boolean!'
      sources:
        description: 'The sources related to the sourceable.'
        type: 'SourceConnection!'
        resolve:
          '@=resolver("Capco\\AppBundle\\GraphQL\\Resolver\\Sourceable\\SourceableSourcesResolver", [value, args])'
        argsBuilder: 'Relay::Connection'
        args:
          orderBy:
            type: 'SourceOrder'
            defaultValue: { field: PUBLISHED_AT, direction: DESC }
      viewerSourcesUnpublished:
        access: "@=hasRole('ROLE_USER')"
        description:
          'The viewer unpublished sources related to the sourceable (only visible by viewer).'
        type: 'SourceConnection!'
        resolve:
          '@=resolver("Capco\\AppBundle\\GraphQL\\Resolver\\Sourceable\\SourceableViewerSourcesUnpublishedResolver", [value, args, getUser()])'
        argsBuilder: 'Relay::Connection'
      availableSourceCategories:
        description: 'The available sources categories of to the sourceable.'
        type: '[SourceCategory]'
        resolve:
          '@=resolver("Capco\\AppBundle\\GraphQL\\Resolver\\Sourceable\\SourceableAvailableCategoriesResolver", [])'
