InternalEvent:
    type: object
    inherits:
        - PreviewEvent
        - Commentable
        - InternalPrimaryKey
        - InternalTimeRangeable
    config:
        description: 'An event.'
        interfaces:
            - Commentable
        name: Event
        fields:
            id:
                description: 'The ID of an object.'
                builder: 'Relay::GlobalId'
                builderConfig:
                    typeName: Event
            adminUrl:
                type: 'URI!'
                description: 'The event admin edit url'
                resolve: '@=resolver("Capco\\AppBundle\\GraphQL\\Resolver\\Event\\EventAdminUrlResolver", [value])'
            participants:
                type: 'ParticipantConnection!'
                description: 'A list of Users that are participating to the event.'
                resolve: '@=resolver("Capco\\AppBundle\\GraphQL\\Resolver\\Event\\EventParticipantsResolver", [value, args])'
                argsBuilder: 'Relay::ForwardConnection'
            themes:
                type: '[InternalTheme!]!'
            projects:
                type: '[InternalProject!]!'
            author:
                type: 'InternalUser'
            commentable:
                type: 'Boolean!'
                resolve: '@=value.isCommentable()'
            media:
                type: 'InternalMedia'
            address:
                type: 'String'
                deprecationReason: '@=service("Capco\\AppBundle\\GraphQL\\Deprecation").toString({startAt: "2020-03-01",reason:"will be deleted"})'
            addressJson:
                type: 'String'
            url:
                type: 'URI!'
                description: 'The url of the event'
                resolve: '@=resolver("Capco\\AppBundle\\GraphQL\\Resolver\\Event\\EventUrlResolver", [value])'
            guestListEnabled:
                type: 'Boolean!'
            customCode:
                type: 'String'
            fullAddress:
                type: 'String'
                deprecationReason: '@=service("Capco\\AppBundle\\GraphQL\\Deprecation").toString({startAt: "2020-03-01",reason:"will be deleted"})'
            lat:
                type: 'Float'
            lng:
                type: 'Float'
            city:
                type: 'String'
                deprecationReason: '@=service("Capco\\AppBundle\\GraphQL\\Deprecation").toString({startAt: "2020-03-01",reason:"will be deleted"})'
            country:
                type: 'String'
                deprecationReason: '@=service("Capco\\AppBundle\\GraphQL\\Deprecation").toString({startAt: "2020-03-01",reason:"will be deleted"})'
            googleMapsAddress:
                type: 'PreviewGoogleMapsAddress'
                resolve: '@=resolver("Capco\\AppBundle\\GraphQL\\Resolver\\Event\\EventAddressResolver", [value])'
            review:
                type: 'InternalEventReview'
                description: 'User submitted events must be reviewed by an admin'
            deletedAt:
                type: 'DateTime'
                description: 'The delete date.'
            translations:
                type: '[InternalEventTranslation!]!'
            link:
                type: 'URI'
            jitsiToken:
                type: 'String'
                access: "@=hasRole('ROLE_USER')"
                resolve: '@=resolver("Capco\\AppBundle\\GraphQL\\Resolver\\Event\\EventJitsiTokenResolver", [value, getUser()])'
                description: 'The jitsi admin/animator token if there is one'
            isPresential:
                type: 'Boolean!'
                description: 'Whether or not this event is presential.'
            isRecordingPublished:
                type: 'Boolean!'
                description: 'Whether or not this event has a public recording URL.'
            roomName:
                type: 'String'
                description: 'The jitsi room name available on remote events only.'
            recordingUrl:
                type: 'URI'
                description: 'The URL used to stream this event recording.'
                resolve: '@=resolver("Capco\\AppBundle\\GraphQL\\Resolver\\Event\\EventRecordingUrlResolver", [value, getUser()])'
            slug:
                type: 'String!'
                description: 'The slug of event'
            metaDescription:
                type: 'String'
            authorAgreeToUsePersonalDataForEventOnly:
                type: 'Boolean'
                description: 'Author of event agree to use personal data for event only'
            adminAuthorizeDataTransfer:
                type: 'Boolean'
                description: 'Admin authorize data transfer'
            isViewerParticipatingAtEvent:
                access: "@=hasRole('ROLE_USER')"
                type: 'Boolean!'
                description: 'Show if user is already participating at event'
                resolve: '@=resolver("Capco\\AppBundle\\GraphQL\\Resolver\\Participant\\IsViewerParticipatingAtEventResolver", [value, getUser()])'
            animator:
                type: 'InternalUser'
                description: 'The jitsi room animator available on remote events only.'
            steps:
                type: '[InternalStep!]!'
                description: 'The steps corresponding to this event.'
            isRegistrationPossible:
                type: 'Boolean'
                description: 'Wheter or not registration is enabled on this event.'
                resolve: '@=resolver("Capco\\AppBundle\\GraphQL\\Resolver\\Event\\EventIsRegistrationPossibleResolver", [value])'
            viewerIsRoomAnimator:
                type: 'Boolean!'
                description: 'Wheter or not the viewer can join the room before it starts.'
                resolve: '@=resolver("Capco\\AppBundle\\GraphQL\\Resolver\\Event\\EventViewerCanJoinBeforeStartResolver", [value, getUser()])'
            owner:
                type: 'InternalEventOwner'
                description: 'The owner of the event.'
            reviewStatus:
                type: 'EventReviewStatus'
                description: 'The event status.'
                resolve: '@=value.getStatus()'
            exportParticipantsUrl:
                access: '@=service("Capco\\AppBundle\\GraphQL\\Resolver\\Event\\EventExportParticipantsUrlResolver").isGranted(value)'
                type: 'URI'
                description: 'The url to export participants'
                resolve: '@=resolver("Capco\\AppBundle\\GraphQL\\Resolver\\Event\\EventExportParticipantsUrlResolver", [value])'
