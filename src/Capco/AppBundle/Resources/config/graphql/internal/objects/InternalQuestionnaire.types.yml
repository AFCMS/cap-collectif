InternalQuestionnaire:
  type: object
  inherits:
    - Node
    - PublicQuestionnaire
    - InternalPrimaryKey
  config:
    name: Questionnaire
    interfaces: [Node]
    fields:
      step:
        type: 'QuestionnaireStep'
      anonymousAllowed:
        type: 'Boolean!'
      description:
        type: 'String'
      multipleRepliesAllowed:
        type: 'Boolean!'
      contribuable:
        type: 'Boolean!'
        resolve: '@=value.canContribute()'
        description: 'accept answers or not'
      phoneConfirmationRequired:
        type: 'Boolean!'
        resolve: '@=value.isPhoneConfirmationRequired()'
      questions:
        type: '[InternalQuestion!]!'
        resolve: "@=resolver('questionnaire_questions', [value])"
      viewerReplies:
        type: '[Reply!]!'
        access: "@=hasRole('ROLE_USER')"
        resolve: '@=resolver("Capco\\AppBundle\\GraphQL\\Resolver\\Questionnaire\\QuestionnaireViewerRepliesResolver", [value, getUser()])'
      acknowledgeReplies:
        type: 'Boolean!'
      type:
        type: 'QuestionnaireType!'
        description: 'The questionnaire type'
      phoneConfirmation:
        type: 'Boolean!'
      participants:
        type: 'InternalUserConnection!'
      replies:
        type: 'InternalReplyConnection!'
        argsBuilder: 'Relay::Connection'
        description: 'A list of replies to the questionnaire.'
        resolve: '@=resolver("Capco\\AppBundle\\GraphQL\\Resolver\\Questionnaire\\QuestionnaireRepliesResolver", [value, args])'
      privateResult:
        type: 'Boolean!'
        description: 'Results of survey are private'
