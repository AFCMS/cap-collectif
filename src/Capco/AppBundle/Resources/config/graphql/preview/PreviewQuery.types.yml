PreviewQuery:
  type: object
  inherits:
    - PublicQuery
  config:
    name: Query
    description: 'Root of the schema.'
    fields:
      viewer:
        type: 'PreviewUser!'
      projects:
        type: 'PreviewProjectConnection!'
        description: 'Lookup projects.'
        argsBuilder: 'Relay::Connection'
        args:
          orderBy:
            type: 'PreviewProjectOrder'
            defaultValue: { field: PUBLISHED_AT, direction: DESC }
            description: 'Ordering options for projects returning from the connection.'
        resolve: '@=resolver("Capco\\AppBundle\\GraphQL\\Resolver\\Query\\QueryProjectsResolver", [args, getUser(), info])'
      events:
        type: 'PreviewEventConnection!'
        argsBuilder: 'Relay::Connection'
        description: 'Lookup events.'
        args:
          orderBy:
            type: 'PreviewEventOrder'
            defaultValue: { field: START_AT, direction: DESC }
            description: 'Ordering options for events returning from the connection.'
          project:
            type: 'ID'
            description: 'ID of a Project to filter by. If non-null, only events belonging to the project will be returned.'
        resolve: '@=resolver("Capco\\AppBundle\\GraphQL\\Resolver\\Query\\QueryEventsResolver", [args, info])'
      users:
        type: 'PreviewUserConnection!'
        argsBuilder: 'Relay::Connection'
        description: 'Lookup users.'
        resolve: '@=resolver("Capco\\AppBundle\\GraphQL\\Resolver\\Query\\QueryUsersResolver", [args, info])'
