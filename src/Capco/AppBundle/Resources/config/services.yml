parameters:
    capco.site_parameter.repository.class: Capco\AppBundle\Repository\SiteParameterRepository
    capco.site_parameter.resolver.class: Capco\AppBundle\SiteParameter\Resolver
    capco.twig_extension.site_parameter.class: Capco\AppBundle\Twig\SiteParameterExtension
    capco.site_image.repository.class: Capco\AppBundle\Repository\SiteImageRepository
    capco.site_image.resolver.class: Capco\AppBundle\SiteImage\Resolver
    capco.twig_extension.site_image.class: Capco\AppBundle\Twig\SiteImageExtension
    capco.twig_extension.menu_url.class: Capco\AppBundle\Twig\MenuLinkExtension
    capco.notify.manager.class: Capco\AppBundle\Manager\Notify

services:
    capco.site_parameter.repository:
        class: %capco.site_parameter.repository.class%
        factory_service: doctrine.orm.default_entity_manager
        factory_method: getRepository
        arguments:
            - Capco\AppBundle\Entity\SiteParameter

    capco.site_parameter.resolver:
        class: %capco.site_parameter.resolver.class%
        arguments:
            - @capco.site_parameter.repository
            - @logger

    capco.twig.site_parameter:
        class: %capco.twig_extension.site_parameter.class%
        arguments: [ @capco.site_parameter.resolver ]
        tags:
            - { name: twig.extension }

    capco.site_image.repository:
        class: %capco.site_image.repository.class%
        factory_service: doctrine.orm.default_entity_manager
        factory_method: getRepository
        arguments:
            - Capco\AppBundle\Entity\SiteImage

    capco.site_image.resolver:
        class: %capco.site_image.resolver.class%
        arguments:
            - @capco.site_image.repository
            - @logger

    capco.twig.site_image:
        class: %capco.twig_extension.site_image.class%
        arguments: [ @capco.site_image.resolver ]
        tags:
            - { name: twig.extension }

    capco.twig.menu_url:
        class: %capco.twig_extension.menu_url.class%
        arguments: [ @router, @validator ]
        tags:
            - { name: twig.extension }

    capco.form.type_extension.media:
        class: Capco\AppBundle\Form\Extension\MediaTypeExtension
        tags:
            - { name: form.type_extension, alias: sonata_media_type }

    capco.notify_manager:
        class:     %capco.notify.manager.class%
        arguments: [@mailer, @templating, @capco.site_parameter.resolver]