services:
  _defaults:
    autowire: true
    autoconfigure: true
    public: false
  _instanceof:
    Overblog\GraphQLBundle\Definition\Resolver\ResolverInterface:
      tags: ['overblog_graphql.resolver']

  Capco\AppBundle\GraphQL\Resolver\:
    resource: '%kernel.root_dir%/../src/Capco/AppBundle/GraphQL/Resolver/*'
    exclude: '%kernel.root_dir%/../src/Capco/AppBundle/GraphQL/Resolver/{GlobalIdResolver.php,ConsultationResolver.php,UserResolver.php, Proposal/ProposalEvaluationResolver.php,UserIsGrantedResolver.php}'

  Capco\AppBundle\GraphQL\Resolver\GlobalIdResolver:
    autowire: true
    public: true
    tags:
      - { name: overblog_graphql.resolver, alias: 'query_node', method: 'resolve' }
      - { name: overblog_graphql.resolver, alias: 'query_nodes', method: 'resolveMultiple' }

  Capco\AppBundle\GraphQL\Resolver\Proposal\ProposalResolver:
    autowire: true


  Capco\AppBundle\GraphQL\Resolver\ConsultationResolver:
    tags:
      - {
          name: overblog_graphql.resolver,
          alias: 'proposition_vote_author',
          method: 'resolvePropositionVoteAuthor',
        }
      - {
          name: overblog_graphql.resolver,
          alias: 'votesByContribution',
          method: 'resolveVotesByContribution',
        }
      - {
          name: overblog_graphql.resolver,
          alias: 'consultation_contribuable',
          method: 'resolveConsultationIsContribuable',
        }
      - { name: overblog_graphql.resolver, alias: 'argument_url', method: 'resolveArgumentUrl' }
      - {
          name: overblog_graphql.resolver,
          alias: 'reporting_author',
          method: 'resolveReportingAuthor',
        }
      - { name: overblog_graphql.resolver, alias: 'reporting_type', method: 'resolveReportingType' }
      - {
          name: overblog_graphql.resolver,
          alias: 'contribution_type',
          method: 'resolveContributionType',
        }

  # This is not a resolver but a voter, rename and move this elsewhere
  Capco\AppBundle\GraphQL\Resolver\UserIsGrantedResolver:
    autowire: true
    public: true

  Capco\AppBundle\GraphQL\Deprecation:
    autowire: true
    public: true
