services:
  _defaults:
    autowire: true
    autoconfigure: true
    public: false
  _instanceof:
    Overblog\GraphQLBundle\Definition\Resolver\ResolverInterface:
      tags: ['overblog_graphql.resolver']

  Capco\AppBundle\GraphQL\Resolver\:
    resource: '%kernel.root_dir%/../src/Capco/AppBundle/GraphQL/Resolver/*'
    exclude: '%kernel.root_dir%/../src/Capco/AppBundle/GraphQL/Resolver/{GlobalIdResolver.php,ConsultationResolver.php,UserResolver.php, Group/GroupResolver.php, Proposal/ProposalEvaluationResolver.php,UserIsGrantedResolver.php}'

  Capco\AppBundle\GraphQL\Resolver\GlobalIdResolver:
    autowire: true
    public: true
    tags:
      - { name: overblog_graphql.resolver, alias: 'query_node', method: 'resolve' }
      - { name: overblog_graphql.resolver, alias: 'query_nodes', method: 'resolveMultiple' }

  Capco\AppBundle\GraphQL\Resolver\Proposal\ProposalResolver:
    autowire: true

  Capco\AppBundle\GraphQL\Resolver\ConsultationResolver:
    tags:
      - {
          name: overblog_graphql.resolver,
          alias: 'sectionappendixtype_id',
          method: 'getSectionAppendixId',
        }
      - {
          name: overblog_graphql.resolver,
          alias: 'sectionappendixtype_title',
          method: 'getSectionAppendixTitle',
        }
      - {
          name: overblog_graphql.resolver,
          alias: 'sectionappendixtype_helpText',
          method: 'getSectionAppendixHelpText',
        }
      - {
          name: overblog_graphql.resolver,
          alias: 'sectionContributionsRelay',
          method: 'getSectionContributionsConnection',
        }
      - { name: overblog_graphql.resolver, alias: 'section_url', method: 'getSectionUrl' }
      - {
          name: overblog_graphql.resolver,
          alias: 'contributionsBySection',
          method: 'getContributionsBySection',
        }
      - {
          name: overblog_graphql.resolver,
          alias: 'section_contributionsCount',
          method: 'getSectionOpinionsCount',
        }
      - {
          name: overblog_graphql.resolver,
          alias: 'section_contributions',
          method: 'getSectionOpinions',
        }
      - { name: overblog_graphql.resolver, alias: 'section_sections', method: 'getSectionChildren' }
      - { name: overblog_graphql.resolver, alias: 'consultation', method: 'resolve' }
      - {
          name: overblog_graphql.resolver,
          alias: 'proposition_section',
          method: 'resolvePropositionSection',
        }
      - {
          name: overblog_graphql.resolver,
          alias: 'consultation_sections',
          method: 'resolveConsultationSections',
        }
      - {
          name: overblog_graphql.resolver,
          alias: 'proposition_arguments',
          method: 'resolvePropositionArguments',
        }
      - {
          name: overblog_graphql.resolver,
          alias: 'proposition_vote_author',
          method: 'resolvePropositionVoteAuthor',
        }
      - {
          name: overblog_graphql.resolver,
          alias: 'votesByContribution',
          method: 'resolveVotesByContribution',
        }
      - {
          name: overblog_graphql.resolver,
          alias: 'consultation_contribuable',
          method: 'resolveConsultationIsContribuable',
        }
      - { name: overblog_graphql.resolver, alias: 'argument_url', method: 'resolveArgumentUrl' }
      - {
          name: overblog_graphql.resolver,
          alias: 'reporting_author',
          method: 'resolveReportingAuthor',
        }
      - { name: overblog_graphql.resolver, alias: 'reporting_type', method: 'resolveReportingType' }
      - {
          name: overblog_graphql.resolver,
          alias: 'contribution_type',
          method: 'resolveContributionType',
        }

  Capco\AppBundle\GraphQL\Resolver\UserResolver:
    tags:
      - { name: overblog_graphql.resolver, alias: 'user_email', method: 'resolveEmail' }
      - {
          name: overblog_graphql.resolver,
          alias: 'user_phoneConfirmationSentAt',
          method: 'resolvePhoneConfirmationSentAt',
        }
      - { name: overblog_graphql.resolver, alias: 'user_gender', method: 'resolveGender' }
      - {
          name: overblog_graphql.resolver,
          alias: 'user_contributionsToDeleteCount',
          method: 'contributionsToDeleteCount',
        }

  Capco\AppBundle\GraphQL\Resolver\Group\GroupResolver:
    tags:
      - { name: overblog_graphql.resolver, alias: 'groups', method: 'resolveAll' }
      - { name: overblog_graphql.resolver, alias: 'group', method: 'resolve' }
      - {
          name: overblog_graphql.resolver,
          alias: 'group_users_connection',
          method: 'resolveUsersConnection',
        }

  # This is not a resolver but a voter, rename and move this elsewhere
  Capco\AppBundle\GraphQL\Resolver\UserIsGrantedResolver:
    autowire: true
    public: true

  Capco\AppBundle\GraphQL\Deprecation:
    autowire: true
    public: true
