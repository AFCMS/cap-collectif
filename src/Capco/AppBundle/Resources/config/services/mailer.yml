services:
  swiftmailer.mailer.transport.mailjet.eventdispatcher:
    class: Swift_Events_SimpleEventDispatcher

  swiftmailer.mailer.mailjet.transport:
    class: Capco\AppBundle\Mailer\Mailjet\MailjetTransport
    arguments: ['@swiftmailer.mailer.transport.mailjet.eventdispatcher', '@Mailjet\Client']

  Capco\AppBundle\Mailer\Mailjet\MailjetClientFactory:
    class: Capco\AppBundle\Mailer\Mailjet\MailjetClientFactory
    arguments: ['@capco.site_parameter.resolver', '@cache.app']

  Mailjet\Client:
    factory: 'Capco\AppBundle\Mailer\Mailjet\MailjetClientFactory:createMailjetClient'
    class: Mailjet\Client
    arguments: ['%mailjet_key%', '%mailjet_secret%']
