services:
  capco.comment.resolver:
    class: Capco\AppBundle\Manager\CommentResolver
    arguments: ['@doctrine.orm.entity_manager', '@router', '@capco.url.resolver']

  capco.project.download.resolver:
    class: Capco\AppBundle\Resolver\ProjectDownloadResolver
    arguments:
        - '@doctrine.orm.entity_manager'
        - "@translator"
        - '@capco.url.array.resolver'
        - '@phpexcel'
        - '@sonata.media.twig.extension'
        - '@twig.extension.httpfoundation'

  capco.contribution.resolver:
    class: Capco\AppBundle\Resolver\ContributionResolver
    arguments: ['@capco.user.repository']

  capco.event.resolver:
    class: Capco\AppBundle\Resolver\EventResolver
    arguments: ['@capco.event.repository']

  capco.highlighted.resolver:
    class: Capco\AppBundle\Resolver\HighlightedContentResolver
    arguments: ['@capco.highlighted.repository', '@capco.toggle.manager']

  capco.menu_item.resolver:
    class: Capco\AppBundle\Manager\MenuItemResolver
    arguments: ['@capco.menu_item.repository', '@capco.toggle.manager', '@router', '@validator']

  capco.opinion_types.resolver:
      class: Capco\AppBundle\Resolver\OpinionTypesResolver
      arguments: ['@capco.opinion_type.repository', '@capco.opinion.repository', '@router']

  capco.section.resolver:
    class: Capco\AppBundle\Resolver\SectionResolver
    arguments: ['@capco.section.repository', '@capco.toggle.manager']

  capco.site_color.resolver:
    class: Capco\AppBundle\SiteColor\Resolver
    arguments: ['@capco.site_color.repository', '@logger']

  capco.site_image.resolver:
    class: Capco\AppBundle\SiteImage\Resolver
    arguments: ['@capco.site_image.repository', '@logger']

  capco.site_parameter.resolver:
    class: Capco\AppBundle\SiteParameter\Resolver
    arguments: ['@capco.site_parameter.repository', '@logger']

  capco.step.resolver:
    class: Capco\AppBundle\Resolver\StepResolver
    arguments: ['@capco.url.resolver']

  capco.twig.highlighted_resolver:
    class: Capco\AppBundle\Twig\HighlightedContentExtension
    arguments: ['@capco.highlighted.resolver']
    tags:
      - { name: twig.extension }

  capco.twig.section_resolver:
    class: Capco\AppBundle\Twig\SectionExtension
    arguments: ['@capco.section.resolver']
    tags:
      - { name: twig.extension }

  capco.url.resolver:
      class: Capco\AppBundle\Resolver\UrlResolver
      arguments: ['@router', '@capco.toggle.manager', '@capco.twig.media']
      tags:
        - { name: overblog_graphql.resolver, alias: "media_url", method: "getMediaUrl" }

  capco.url.array.resolver:
      class: Capco\AppBundle\Resolver\UrlArrayResolver
      arguments: ['@router']

  capco.vote.resolver:
    class: Capco\AppBundle\Resolver\VoteResolver
    arguments: ['@router', '@capco.url.resolver']

  capco.proposal_votes.resolver:
    class: Capco\AppBundle\Resolver\ProposalStepVotesResolver
    arguments: ['@capco.proposal_selection_vote.repository', '@capco.selection_step.repository', '@capco.proposal_collect_vote.repository', '@capco.collect_step.repository', '@capco.proposal.repository']

  capco.project_stats.resolver:
    class: Capco\AppBundle\Resolver\ProjectStatsResolver
    arguments: ['@capco.selection_step.repository', '@capco.collect_step.repository', '@capco.theme.repository', '@capco.district.repository', '@capco.proposal_category.repository', '@capco.user_type.repository', '@capco.proposal.repository', '@capco.proposal_selection_vote.repository']

  capco.project.resolver:
    class: Capco\AppBundle\Resolver\ProjectResolver
    arguments: ['@capco.project.repository']
    calls:
      - [ setContainer, ["@service_container"] ]

  capco.media.manager:
    class: Capco\AppBundle\Manager\MediaManager
    arguments: ['@sonata.media.manager.media']

  capco.project.serializer:
    class: Capco\AppBundle\Resolver\Project\ProjectSerializer
    arguments: ['@jms_serializer.serializer']


  capco.project.json.serializer:
    class: Capco\AppBundle\Resolver\Project\JsonProjectSerializer
    arguments: ['@capco.project.serializer']

  capco.project.search.resolver:
    class: Capco\AppBundle\Resolver\Project\ProjectSearchResolver
    arguments: ['@capco.project.repository']

  capco.follower.resolver:
    class: Capco\AppBundle\Resolver\ProposalResolver
    arguments: ['@doctrine.orm.entity_manager', '%kernel.root_dir%','@capco.resolvers.users', '@monolog.logger']
