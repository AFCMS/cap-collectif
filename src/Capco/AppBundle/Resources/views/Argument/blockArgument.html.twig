{% set opinion = argument.linkedOpinion %}
{% set project = opinion.step.project %}
{% set opinionType = opinion.opinionType %}
<li class="opinion  opinion--argument {% if argument.author.isVip %}bg-vip{% endif %}{% if classes is defined %} {{ classes }}{% endif %}" id="arg-{{ argument.id }}">
    <div class="opinion__body  box">
        {% if argument.Author is not null %}
            {% include 'CapcoUserBundle:Avatar:avatar.html.twig' with { 'user': argument.Author, 'classes': '', 'link_classes': 'pull-left'} only %}
        {% endif %}
        <div class="opinion__data">
            <p class="h5  opinion__user">
                <a href="{{ path('capco_user_profile_show_all', {'slug': argument.Author.slug}) }}">
                    {{ argument.Author.username }}
                </a>
                {% if profile is defined %}
                    <span class="label  label--right {% if argument.type == 0 %}label-danger{% elseif argument.type == 1 %}label-success{% endif %}">
                        {{ argumentsLabels[argument.type] | trans({}, 'CapcoAppBundle') | capitalize }}
                    </span>
                {% endif %}
            </p>
            <p class="excerpt  opinion__date">{{ argument.createdAt | localizeddate('long', 'short', app.request.locale) }}</p>
            {% if profile is defined %}
                <p>{{ 'argument.trashed.linked_proposition' | trans({}, 'CapcoAppBundle') }} <a href="{{ path('app_project_show_opinion', {'projectSlug': project.slug, 'stepSlug': opinion.step.slug, 'opinionTypeSlug': argument.Opinion.OpinionType.slug, 'opinionSlug': argument.Opinion.slug}) }}">{{ argument.Opinion.title }}</a></p>
            {% endif %}
        </div>
        <p class="opinion__text more" style="max-height: 115px; overflow: hidden; width: 100%">
            {% if argument.isEnabled == false %}
                <span class="label label-default" style="position: static; margin-right: 5px">
                    {{ 'opinion.show.disabled.label'|trans({}, 'CapcoAppBundle') }}
                </span>
            {% elseif argument.isTrashed %}
                <span class="label label-default" style="position: static; margin-right: 5px">
                    {{ 'opinion.show.trashed.label'|trans({}, 'CapcoAppBundle') }}
                </span>
            {% endif %}
            {% if argument.isEnabled %}
                {{ argument.body | escape | nl2br }}
            {% endif %}
        </p>

        {% if argument.isEnabled and trashed is not defined %}

            <button disabled="disabled" class="btn  btn-dark-gray  btn-xs"><i class="cap-hand-like-2"></i> {{ 'argument.vote.submit'|trans({}, 'CapcoAppBundle') }}</button>
            <span class="opinion__votes-nb">{{ argument.votesCount }}</span>

            {% if is_feature_enabled('reporting') %}
                {% if argument.reports | length > 0 %}
                    <button disabled="disabled" class="btn btn-xs btn-dark-gray"><i class="cap cap-flag-1"></i> {{ 'argument.report.reported'|trans({}, 'CapcoAppBundle') }}</button>
                {% else %}
                    <a href="{{ path('app_report_argument' ,{'projectSlug': project.slug, 'stepSlug': opinion.step.slug, 'opinionTypeSlug': opinionType.slug, 'opinionSlug': opinion.slug, 'argumentId': argument.id } ) }}" class="btn btn-xs btn-dark-gray  btn--outline  connection-popover-js"><i class="cap cap-flag-1"></i> {{ 'argument.report.submit'|trans({}, 'CapcoAppBundle') }}</a>
                {% endif %}
            {% endif %}

            {% if argument.canContribute and currentUser is not null and currentUser == argument.Author %}
                <a href="{{ path('app_project_edit_argument' ,{'projectSlug': project.slug, 'stepSlug': opinion.step.slug, 'opinionTypeSlug': opinionType.slug, 'opinionSlug': opinion.slug, 'argumentId': argument.id } ) }}" class="btn  btn-dark-gray  btn--outline  btn-xs"><i class="cap cap-pencil-1"></i> {{ 'argument.update.button'|trans({}, 'CapcoAppBundle') }}</a>
            {% endif %}

        {% else %}
            <button disabled="disabled" class="btn  btn-default btn-xs"><i class="cap cap-hand-like-2"></i> {{ 'argument.vote.submit'|trans({}, 'CapcoAppBundle') }}</button>
            <span class="opinion__votes-nb">{{ argument.votesCount }}</span>
        {% endif %}

    </div>
</li>
