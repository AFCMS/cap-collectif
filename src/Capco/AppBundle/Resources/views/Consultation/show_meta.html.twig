<div class="thumbnail--custom  thumbnail--sidebar  block--bordered">

    {% if consultation.video and consultation.Image %}
        <a href="{{ consultation.video }}" class="play  fancybox" data-type="iframe">
            {% thumbnail consultation.Image, 'img_video' with {'title': consultation.Image.name, 'alt': consultation.Image.name, 'class': 'img-responsive  center-block'} %}
        </a>
    {% elseif consultation.video and consultation.Image is null %}
        <a href="{{ consultation.video }}" class="play  fancybox" data-type="iframe">
            <div class="bg-primary  bg--default"></div>
        </a>
    {% elseif consultation.video is null and consultation.Image %}
        {% thumbnail consultation.Image, 'img_video' with {'title': consultation.Image.name, 'alt': consultation.Image.name, 'class': 'img-responsive  center-block'} %}
    {% else %}
        <div class="bg-primary  bg--default"></div>
    {% endif %}

    <div class="box">
        <h4 class="h4">{{ 'consultation.show.meta.intro.title'|trans({}, 'CapcoAppBundle') }}</h4>
        <div class="more">{{ consultation.body | raw }}</div>
        {%  if currentStep is not defined %}
            {% set currentStep = null %}
        {% endif %}
        {{ render(controller('CapcoAppBundle:Step:showAllInNav', {'consultation': consultation, 'currentStep': currentStep})) }}

        <h4 class="h4">{{ 'consultation.show.meta.info.title'|trans({}, 'CapcoAppBundle') }}</h4>
        {% if consultation.Themes | length > 0 %}
            <p class="excerpt">{{ 'consultation.show.meta.info.themes'|trans({}, 'CapcoAppBundle') }}</p>
            <p>
                {% for theme in consultation.Themes %}
                    {% if theme.canDisplay %}
                        <a href="{{ path('app_theme_show', {'slug': theme.slug}) }}">{{theme}}</a> {% if loop.last == false %} , {% endif %}
                    {% endif %}
                {% endfor %}
            </p>
        {% endif %}
        <p class="excerpt">{{ 'consultation.show.meta.info.opening'|trans({}, 'CapcoAppBundle') }}</p>
        <p>{{ consultation.openedAt | localizeddate('long', 'none') }}</p>
        <p class="excerpt">{{ 'consultation.show.meta.info.contributions'|trans({}, 'CapcoAppBundle') }}</p>
        <p>
            {% set opinionCount = (consultation.opinionCount + consultation.trashedOpinionCount) %}
            {% set argumentCount = (consultation.argumentCount + consultation.trashedArgumentCount) %}
            {% transchoice opinionCount with {'%count%': opinionCount} from 'CapcoAppBundle' %}
            consultation.show.opinions
            {% endtranschoice %}
            <br/>
            {% transchoice argumentCount with {'%count%': argumentCount} from 'CapcoAppBundle' %}
            consultation.show.arguments
            {% endtranschoice %}
        </p>
    </div>
</div>
