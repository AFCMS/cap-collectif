{% block body_text %}
    {% set sitenameUrl = '<a href="' ~ url('app_homepage') ~ '">' ~ sitename ~ '</a>' %}
    {% autoescape false %}
    <p>
        {{ 'reply.acknowledgement.hello'|trans({
            '%username%' : reply.author.username
        }, 'CapcoAppBundle') }}
    </p>
    <p>
        {{ 'reply.acknowledgement.thx'|trans({
            '%projectname%': project.title,
            '%sitename%': sitenameUrl,
        }, 'CapcoAppBundle') }}
    </p>
    <p>
        {{ 'reply.acknowledgement.replies'|trans({}, 'CapcoAppBundle') }}
    </p>
    {% for response in reply.responses %}
        <div>
            <p><strong>{{ response.question.title }}</strong></p>
            {% if response.value is null or (response.value is iterable and response.value | length == 0) %}
                <p>{{ 'reply.acknowledgement.no_value'|trans({}, 'CapcoAppBundle') }}</p>
            {% elseif response.question.type == 'editor' %}
                <p>{{ response.value | raw }}</p>
            {% elseif response.question.type == 'ranking' %}
                {% if response.value.labels | length > 0 %}
                    <ol>
                        {% for label in response.value.labels %}
                            <li>{{ label }}</li>
                        {% endfor %}
                    </ol>
                {% else %}
                    <p>{{ 'reply.acknowledgement.no_value'|trans({}, 'CapcoAppBundle') }}</p>
                {% endif %}
            {% elseif response.value is iterable %}
                {% set labels = response.value.labels %}
                {% if response.value.other is defined and response.value.other is not null %}
                    {% set labels = labels | merge([response.value.other]) %}
                {% endif %}
                {% if labels | length > 0 %}
                    <p>{{ labels | join(', ') }}</p>
                {% else %}
                    <p>{{ 'reply.acknowledgement.no_value'|trans({}, 'CapcoAppBundle') }}</p>
                {% endif %}
            {% else %}
                <p>{{ response.value }}</p>
            {% endif %}
        </div>
    {% endfor %}
    <p>
        {{ 'reply.acknowledgement.done'|trans({}, 'CapcoAppBundle') }}
    </p>
    <hr/>
    <p>
        {{ 'reply.acknowledgement.footer1'|trans({'%sitename%': sitenameUrl}, 'CapcoAppBundle') }}
    </p>
    <p>
        {{ 'reply.acknowledgement.footer2'|trans({'%sitename%': sitenameUrl}, 'CapcoAppBundle') }}
    </p>
    {% endautoescape %}
{% endblock %}
{% block body_html %}{% endblock %}
