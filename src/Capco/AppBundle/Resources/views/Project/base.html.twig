{% extends '@CapcoApp/Project/layout_with_widget.html.twig' %}

{% set currentStepSlug = currentStep.slug is defined ? currentStep.slug : currentStep %}
{% set showTrash = is_feature_enabled('project_trash') %}

{% block canonical_link %}{% endblock %}

{% block metaTags %}
{% endblock %}

{% block title %}
    {{ parent() }} - {{ project.title }}
{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link href="{{ asset('js/fancybox/jquery.fancybox.css') }}" rel="stylesheet">
{% endblock %}

{% block jumbotron %}{% endblock %}

{% block body %}
    <div class="container container--custom">
        {% include '@CapcoApp/Project/show_title.html.twig' %}
    </div>

    {% if project.steps | length > 1 %}
        <section>
            {{ react_render_component('ProjectStepTabsApp', {
                'props': {
                    'projectId': project.id
                },
            })}}
        </section>
    {% endif %}

    <div
        class="container container--custom {{ project.steps | length <= 1 ? 'project_no-step-tabs' }}"
        style="padding-top: 0"
    >

        <div class="row">
            <div class="col-xs-12" id="details">

                {% block details %}{% endblock %}

            </div>
        </div>
    </div>

    {% if showTrash %}
        <section>
            {{ react_render_component('ProjectTrashButtonApp', {
                'props': {
                    'link': path('app_project_show_trashed', {'projectSlug': project.slug })
                },
            })}}
        </section>
    {% endif %}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript">
        $('.more').readmore({
            collapsedHeight: 88,
            moreLink: '<a class="text-center" href="#">{{ 'project.show.meta.read_more'|trans({}, 'CapcoAppBundle') }}</a>',
            lessLink: '<a class="text-center" href="#">{{ 'project.show.meta.read_less'|trans({}, 'CapcoAppBundle') }}</a>'
        });
    </script>
{% endblock %}
