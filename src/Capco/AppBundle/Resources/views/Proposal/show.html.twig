{% extends '@CapcoApp/Project/layout_with_widget.html.twig' %}

{% block canonical_link %}{{ '' }}{% endblock %}

{% block metaTags %}
    {% set image %}{% if proposal.media %}{% path proposal.media, 'blockHeader' %}{% endif %}{% endset %}
    {% include 'CapcoAppBundle:Default:meta.html.twig' with {
        'title':       proposal.title,
        'description': proposal.body|striptags|truncate(250, true),
        'image':       image,
        'url':         url('app_project_show_proposal', {'projectSlug': project.slug, 'stepSlug': currentStep.slug, 'proposalSlug': proposal.slug})
    } only %}
{% endblock %}


{% block title %}
    {{ parent() }} - {{ proposal.title }}
{% endblock %}

{% block jumbotron %}{% endblock %}

{% block reduxStore %}
    {% set initialState = {
        'proposal': {
            'referer': referer,
        }
    } %}
    {% include '@CapcoApp/redux_store.html.twig' with {'data' : initialState} %}
{% endblock %}

{% block body %}
    {{ react_render_component('ProposalPageApp', {'props': {'currentVotableStepId': currentVotableStepId, 'proposalId': proposal.id|toGlobalId('Proposal') }}) }}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript"
            src="https://maps.googleapis.com/maps/api/js?key=***REMOVED***&libraries=places"></script>
{% endblock %}
