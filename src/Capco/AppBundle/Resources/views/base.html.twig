{% extends '@CapcoApp/layout.html.twig' %}

{% block mainContent %}

    {# Header  #}
    {% include '@CapcoApp/Default/header.html.twig' %}

    {% for key, messages in app.session.flashbag.all() %}
        {% for message in messages %}
        <div class="alert alert-{{ key }} alert-dismissible  alert--no-radius" role="alert" style="margin-bottom: 0; text-align: center">
            <button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">{{ 'global.alert.close'|trans({}, 'CapcoAppBundle') }}</span></button>
            <span>{% block error_message %}{{ message | trans({}, 'CapcoAppBundle') }}{% endblock %}</span>
        </div>
        {% endfor %}
    {% endfor %}

    {# Main jumbotron for a primary marketing message or call to action #}
    {% block jumbotron %}{% endblock %}

    <div class="main">
        {% block body %}{% endblock %}
    </div>

    {# Footer #}
    {{ render(controller('CapcoAppBundle:Site/Default:footer')) }}

{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript">
        require('Resources/js/jsapi');
        require('Resources/js/googleCharts');
        var cookieChoices = require('Resources/js/cookiechoices');
        var App = require('Resources/js/app');

        $(window).on('load', function() {
            App.externalLinks();
            App.navbarAutocollapse("{{ 'global.menu.see_more' | trans({}, 'CapcoAppBundle') }}");
        });
        $(window).on('resize', function() {
            App.navbarAutocollapse("{{ 'global.menu.see_more' | trans({}, 'CapcoAppBundle') }}");
        });
        $(function () {
          $('[data-toggle="tooltip"]').tooltip();
        });
        document.addEventListener('DOMContentLoaded', function(event) {
            cookieChoices.showCookieConsentBar(
              "{{ 'cnil.message' | trans({}, 'CapcoAppBundle') | raw }}",
              "{{ 'cnil.close' | trans({}, 'CapcoAppBundle') | raw }}",
              "{{ 'cnil.learn' | trans({}, 'CapcoAppBundle') | raw }}",
              "{{ url('app_confidentialite') }}"
            );
        });
    </script>
    {% set client_js = capco_site_parameter_value('global.site.embed_js') %}
    {% if null != client_js %}
        {{ client_js|raw }}
    {% endif %}
{% endblock %}
